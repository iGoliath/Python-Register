[1mdiff --git a/RegisterDatabase b/RegisterDatabase[m
[1mold mode 100644[m
[1mnew mode 100755[m
[1mindex 97a060f..e69de29[m
Binary files a/RegisterDatabase and b/RegisterDatabase differ
[1mdiff --git a/Register.py b/src/Register.py[m
[1mold mode 100644[m
[1mnew mode 100755[m
[1msimilarity index 2%[m
[1mrename from Register.py[m
[1mrename to src/Register.py[m
[1mindex f0a83e7..0187011[m
[1m--- a/Register.py[m
[1m+++ b/src/Register.py[m
[36m@@ -1,290 +1,268 @@[m
 import tkinter as tk[m
 import inventory_functions as invf[m
 import widget_functions as wf[m
[32m+[m[32mfrom widget_manager import *[m
 from makeTransaction import *[m
 from enteritem import *[m
 from stateManager import *[m
[32m+[m[32mfrom config import Config[m
 from datetime import datetime[m
 from escpos.printer import Usb[m
 import pygame[m
 [m
 [m
[31m-#printer = Usb(0x0fe6, 0x811e, 0) #File("/dev/usb/lp0")[m
[31m-pygame.mixer.init()[m
[31m-#Declaration of root window and all neccessary frames[m
[31m-root = tk.Tk()[m
[31m-root.title("TBC REGISTER")[m
[31m-root.geometry("1024x600")[m
[31m-root.tk.call('tk', 'scaling', 1)[m
[31m-state_manager = StateManager(root)[m
[31m-[m
[31m-mode_select_frame = tk.Frame(root)[m
[31m-register_frame = tk.Frame(root, bg='black')[m
[31m-admin_frame = tk.Frame(root)[m
[31m-add_item_frame = tk.Frame(root)[m
[31m-update_inventory_frame = tk.Frame(root)[m
[31m-additional_register_functions_frame = tk.Frame(root)[m
[31m-update_buttons_frame = tk.Frame(update_inventory_frame)[m
[31m-reenter_frame = tk.Frame(add_item_frame)[m
[31m-add_item_yes_no = tk.Frame(add_item_frame)[m
[31m-additional_register_functions_yes_no = tk.Frame(additional_register_functions_frame)[m
[31m-update_inventory_yes_no = tk.Frame(update_inventory_frame)[m
[31m-register_widgets_frame = tk.Frame(register_frame)[m
[31m-add_item_listbox_frame = tk.Frame(root)[m
[31m-register_add_item_prompt_frame = tk.Frame(root)[m
[31m-[m
[31m-root.grid_columnconfigure(0, weight=1)[m
[31m-root.grid_rowconfigure(0, weight=1)[m
 [m
[31m-# Loop through frames, fit them to screen, and configure them so that widgets in column 1 are centered[m
[31m-# Widgets in column 1 will determine the width of the rest of the widgets[m
[31m-for frame in (mode_select_frame, register_frame, admin_frame, [m
[31m-			  add_item_frame, update_inventory_frame, [m
[31m-			  additional_register_functions_frame, [m
[31m-			  add_item_listbox_frame, register_add_item_prompt_frame):[m
[31m-	frame.grid(row=0, column=0, sticky='nsew')[m
[31m-	frame.grid_columnconfigure(0, weight=1)[m
[31m-	frame.grid_columnconfigure(1, weight=0)[m
[31m-	frame.grid_columnconfigure(2, weight=1)[m
[31m-[m
[31m-for frame in (update_buttons_frame, reenter_frame, add_item_yes_no, additional_register_functions_yes_no, register_widgets_frame):[m
[31m-	frame.grid_columnconfigure(0, weight=1)[m
[31m-	frame.grid_columnconfigure(1, weight=1)[m
 [m
[31m-#root.attributes("-fullscreen", True)[m
 [m
[31m-def enter_register_frame():[m
[31m-	global state_manager[m
[31m-	state_manager.new_transaction()[m
[31m-	register_frame.tkraise()[m
[31m-	invisible_entry.delete(0, tk.END)[m
[31m-	total_entry.delete(0, tk.END)[m
[31m-	total_entry.insert(tk.END, "$0.00")[m
[31m-	invisible_entry.focus_force()[m
 [m
[32m+[m[32mclass Register:[m
 [m
[32m+[m	[32mdef __init__(self, root):[m
[32m+[m		[32mself.ui = WidgetManager(root, self)[m
[32m+[m		[32mself.state_manager = StateManager(root)[m
[32m+[m		[32mself.config = Config()[m
[32m+[m		[32mself.vcmd = (root.register(self.only_numbers), '%P')[m
[32m+[m		[32mself.printer = Usb(0x0fe6, 0x811e, 0) #File("/dev/usb/lp0")[m
 		[m
[31m-def enter_add_item_frame(entered_barcode=None):[m
[31m-	global state_manager[m
[31m-	state_manager.new_add_item_object()[m
[31m-	state_manager.reentering = False[m
[31m-	state_manager.add_item_index = 0[m
[31m-	add_item_entry.focus_force()[m
[31m-	add_item_label.grid(column=1, row=0, sticky='ew')[m
[31m-	add_item_entry.grid(column=1, row=1, sticky='ew', pady=15)[m
[31m-	add_item_button.grid(column=1, row=3, sticky='ew')[m
[31m-	back_button.grid(column=1, row=4, sticky='ew')[m
[31m-	quit_button.grid(column=1, row=5, sticky='ew')[m
[31m-	add_item_yes_no.grid_forget()[m
[31m-	item_info_confirmation.grid_forget()[m
[31m-	reenter_frame.grid_forget()[m
[31m-	add_item_frame.tkraise()[m
 [m
[32m+[m	[32mdef only_numbers(self, P):[m
[32m+[m		[32mif P.isdigit() or P == "":[m
[32m+[m			[32mreturn True[m
[32m+[m		[32melse:[m
[32m+[m			[32mreturn False[m
          [m
[31m-	#add_item_invisible_entry.config(textvariable=state_manager.add_item_var)[m
[31m-	#state_manager.binding_manager = add_item_entry.bind("<FocusIn>", return_add_item_invisible_entry_focus)[m
[32m+[m	[32mdef enter_register_frame(self, event = None):[m
[32m+[m		[32mpygame.mixer.music.load("short-beep.mp3")[m
[32m+[m		[32mpygame.mixer.music.play()[m
[32m+[m		[32mself.state_manager.new_transaction()[m
[32m+[m		[32mself.ui.register_frame.tkraise()[m
[32m+[m		[32mself.ui.invisible_entry.delete(0, tk.END)[m
[32m+[m		[32mself.ui.sale_items_listbox.delete(0, tk.END)[m
[32m+[m		[32mself.ui.total_entry.delete(0, tk.END)[m
[32m+[m		[32mself.ui.total_entry.insert(tk.END, "$0.00")[m
[32m+[m		[32mself.ui.usr_entry.delete(0, tk.END)[m
[32m+[m		[32mself.ui.usr_entry.insert(tk.END, "$0.00")[m
[32m+[m		[32mself.ui.invisible_entry.focus_force()[m
[32m+[m		[32mreturn "break"[m
 	[m
[32m+[m	[32mdef enter_add_item_frame(self, entered_barcode=None):[m
[32m+[m		[32mself.state_manager.new_add_item_object()[m
[32m+[m		[32mself.state_manager.reentering = False[m
[32m+[m		[32mself.state_manager.add_item_index = 0[m
[32m+[m		[32mself.ui.enter_add_item_frame()[m
 [m
 		if entered_barcode is not None:[m
[31m-		on_add_item_enter(None, entered_barcode)[m
[32m+[m			[32mself.on_add_item_enter(None, entered_barcode)[m
 		else:[m
[31m-		add_item_label.config(text="Please enter item's barcode: ")[m
[32m+[m			[32mself.ui.add_item_label.config(text="Please enter item's barcode: ")[m
 [m
 [m
[31m-def enter_void_frame(event=None):[m
[31m-	additional_register_functions_frame.tkraise()[m
[32m+[m	[32mdef enter_void_frame(self, event=None):[m
[32m+[m		[32mself.ui.additional_register_functions_frame.tkraise()[m
 [m
[31m-def enter_update_inventory_frame(event=None):[m
[31m-	update_inventory_frame.tkraise()[m
[31m-	update_inventory_entry.focus_force()[m
[32m+[m	[32mdef enter_update_inventory_frame(self, event=None):[m
[32m+[m		[32mself.ui.update_inventory_frame.tkraise()[m
[32m+[m		[32mself.ui.update_inventory_entry.focus_force()[m[41m	[m
 [m
[31m-def register_go_back(event=None):[m
[31m-	cancel_trans()[m
[31m-	mode_select_frame.tkraise()		[m
[32m+[m	[32mdef process_sale(self, event=None, entered_barcode=None):[m
 		[m
[31m-def process_sale(event=None, entered_barcode=None):[m
[31m-	global state_manager[m
[31m-	total_entry.delete(0, tk.END)[m
[31m-	total_entry.insert(tk.END, "$0.00")[m
[32m+[m		[32mself.ui.total_entry.delete(0, tk.END)[m
[32m+[m		[32mself.ui.total_entry.insert(tk.END, "$0.00")[m
 		if entered_barcode is not None:[m
[31m-		total, item_name, item_price, taxable = state_manager.trans.sell_item(entered_barcode)[m
[32m+[m			[32mtotal, item_name, item_price, taxable = self.state_manager.trans.sell_item(entered_barcode)[m
 		else:[m
[31m-		barcode = invisible_entry.get()[m
[31m-		invisible_entry.delete(0, tk.END)[m
[31m-		total, item_name, item_price, taxable = state_manager.trans.sell_item(barcode)[m
[32m+[m			[32mbarcode = self.ui.invisible_entry.get()[m
[32m+[m			[32mself.ui.invisible_entry.delete(0, tk.END)[m
[32m+[m			[32mtotal, item_name, item_price, taxable = self.state_manager.trans.sell_item(barcode)[m
 		if total == "item_not_found":[m
[31m-		register_add_item_prompt_frame.tkraise()[m
[31m-		root.wait_variable(state_manager.yes_no_var)[m
[31m-		yes_no_answer = state_manager.yes_no_var.get()[m
[32m+[m			[32mself.ui.register_add_item_prompt_frame.tkraise()[m
[32m+[m			[32mroot.wait_variable(self.state_manager.yes_no_var)[m
[32m+[m			[32myes_no_answer = self.state_manager.yes_no_var.get()[m
 			if yes_no_answer == "yes":[m
[31m-			state_manager.coming_from_register = True[m
[31m-			enter_add_item_frame(barcode)[m
[32m+[m				[32mself.state_manager.coming_from_register = True[m
[32m+[m				[32mself.enter_add_item_frame(barcode)[m
 				return[m
 			elif yes_no_answer == "no":[m
[31m-			enter_register_frame()[m
[32m+[m				[32mself.ui.register_frame.tkraise()[m
 				return[m
[31m-	usr_entry.delete(0, tk.END)[m
[31m-	usr_entry.insert(0, "$" + f"{total:.2f}")[m
[31m-	sale_items.delete("1.0", "end")[m
[31m-	for i in range(len(state_manager.trans.items_list)):[m
[31m-		sale_info = state_manager.trans.items_list[i][0] + " $" + str(state_manager.trans.items_list[i][1]) + " "[m
[31m-		if state_manager.trans.items_list[i][2] == 1:[m
[32m+[m		[32mself.ui.usr_entry.delete(0, tk.END)[m
[32m+[m		[32mself.ui.usr_entry.insert(0, f"${total:.2f}")[m
[32m+[m		[32mself.ui.sale_items_listbox.delete(0, tk.END)[m
[32m+[m		[32mfor i in range(len(self.state_manager.trans.items_list)):[m
[32m+[m			[32msale_info = self.state_manager.trans.items_list[i][0] + " $" + str(self.state_manager.trans.items_list[i][1]) + " "[m
[32m+[m			[32mif self.state_manager.trans.items_list[i][2] == 1:[m
 				sale_info += "TX"[m
 			else:[m
 				sale_info += "NT"[m
[31m-		sale_info += " QTY: " + str(state_manager.trans.quantity_sold_list[i][1]) + "\n" [m
[31m-		sale_items.insert("end", sale_info)[m
[32m+[m			[32msale_info += " QTY: " + str(self.state_manager.trans.quantity_sold_list[i][1])[m[41m [m
[32m+[m			[32mself.ui.sale_items_listbox.insert(tk.END, sale_info)[m
 		[m
[31m-def void_transaction(which_button):[m
[31m-	register_functions_buttons_frame.grid_forget()[m
[32m+[m	[32mdef void_transaction(self, which_button):[m
[32m+[m		[32mself.ui.register_functions_buttons_frame.grid_forget()[m
 		void_conn = sqlite3.connect("RegisterDatabase")[m
 		void_cursor = void_conn.cursor()[m
 		if which_button == "last":[m
[31m-		additional_register_functions_text.grid(row=1, column=1, sticky='nsew')[m
[32m+[m			[32mself.ui.additional_register_functions_text.grid(row=1, column=1, sticky='nsew')[m
 			void_cursor.execute('''SELECT * FROM SALES WHERE "Transaction ID" = (SELECT MAX("Transaction ID") FROM SALES)''')[m
 			results = void_cursor.fetchall()[m
 			row = results[0][m
[31m-		print_void_transaction_info(row[0], row[4], row[5], row[8], row[9], row[7])[m
[31m-		additional_register_functions_yes_no.grid(column=1, row=2, sticky='nsew')[m
[31m-		additional_register_functions_label.config(text="Void This Transaction?")[m
[31m-		root.wait_variable(state_manager.yes_no_var)[m
[31m-		button_pressed = state_manager.yes_no_var.get()[m
[32m+[m			[32mself.print_void_transaction_info(row[0], row[4], row[5], row[8], row[9], row[7])[m
[32m+[m			[32mself.ui.additional_register_functions_yes_no.grid(column=1, row=2, sticky='nsew')[m
[32m+[m			[32mself.ui.additional_register_functions_label.config(text="Void This Transaction?")[m
[32m+[m			[32mroot.wait_variable(self.state_manager.yes_no_var)[m
[32m+[m			[32mbutton_pressed = self.state_manager.yes_no_var.get()[m
 			if button_pressed == "yes":[m
 				try:[m
 					void_cursor.execute('''UPDATE SALES SET Voided = ? WHERE "Transaction ID" = ?''', (1, row[0]))[m
 					void_cursor.execute('''SELECT * FROM SALEITEMS WHERE "Transaction ID" = ?''', (row[0], ))[m
 					item_results = void_cursor.fetchall()[m
[31m-				print_receipt("void", row[0], item_results, row)[m
[32m+[m					[32mself.print_receipt("void", row[0], item_results, row)[m
 				except sqlite3.Error as e:[m
[31m-				additional_register_functions_text.delete("1.0", "end")[m
[31m-				additional_register_functions_text.insert("end", "ERROR, please try again")[m
[32m+[m					[32mself.ui.additional_register_functions_text.delete("1.0", "end")[m
[32m+[m					[32mself.ui.additional_register_functions_text.insert("end", "ERROR, please try again")[m
 				finally:[m
 					void_conn.commit()[m
 					void_conn.close()[m
[31m-				additional_register_functions_text.grid_forget()[m
[31m-				additional_register_functions_yes_no.grid_forget()[m
[31m-				enter_register_frame()[m
[31m-				additional_register_functions_label.config(text="Please select an option")[m
[31m-				last_button.grid(row=1, column=1, sticky='nsew')[m
[31m-				number_button.grid(row=2, column=1, sticky='nsew')[m
[32m+[m					[32mself.ui.additional_register_functions_text.grid_forget()[m
[32m+[m					[32mself.ui.additional_register_functions_yes_no.grid_forget()[m
[32m+[m					[32mself.enter_register_frame()[m
[32m+[m					[32mself.ui.additional_register_functions_label.config(text="Please select an option")[m
[32m+[m					[32mself.ui.last_button.grid(row=1, column=1, sticky='nsew')[m
[32m+[m					[32mself.ui.number_button.grid(row=2, column=1, sticky='nsew')[m
 			elif button_pressed == "no":[m
 				void_conn.close()[m
[31m-			additional_register_functions_text.grid_forget()[m
[31m-			additional_register_functions_yes_no.grid_forget()[m
[31m-			void_transaction("ref")[m
[32m+[m				[32mself.ui.additional_register_functions_text.grid_forget()[m
[32m+[m				[32mself.ui.additional_register_functions_yes_no.grid_forget()[m
[32m+[m				[32mself.void_transaction("ref")[m
 		elif which_button == "ref":[m
[31m-		additional_register_functions_label.config(text="Please enter the reference number:")[m
[31m-		additional_register_functions_entry.grid(row=1, column=1, sticky='nsew')[m
[31m-		root.wait_variable(state_manager.reference_number_var)[m
[31m-		reference_number = state_manager.reference_number_var.get()[m
[31m-		additional_register_functions_entry.grid_forget()[m
[31m-		additional_register_functions_text.grid(row=1, column=1, sticky='nsew')[m
[31m-		additional_register_functions_yes_no.grid(column=1, row=2, sticky='nsew')[m
[32m+[m			[32mself.ui.additional_register_functions_label.config(text="Please enter the reference number:")[m
[32m+[m			[32mself.ui.additional_register_functions_entry.grid(row=1, column=1, sticky='nsew')[m
[32m+[m			[32mroot.wait_variable(self.state_manager.reference_number_var)[m
[32m+[m			[32mreference_number = self.state_manager.reference_number_var.get()[m
[32m+[m			[32mself.ui.additional_register_functions_entry.grid_forget()[m
[32m+[m			[32mself.ui.additional_register_functions_text.grid(row=1, column=1, sticky='nsew')[m
[32m+[m			[32mself.ui.additional_register_functions_yes_no.grid(column=1, row=2, sticky='nsew')[m
 			void_cursor.execute('''Select * FROM SALES WHERE "Transaction ID" = ?''', (reference_number, ))[m
 			results = void_cursor.fetchall()[m
 			row = results[0][m
[31m-		additional_register_functions_label.config(text="Void this transaction?")[m
[31m-		print_void_transaction_info(row[0], row[4], row[5], row[8], row[9], row[7])[m
[31m-		root.wait_variable(state_manager.yes_no_var)[m
[31m-		button_pressed = state_manager.yes_no_var.get()[m
[32m+[m			[32mself.ui.additional_register_functions_label.config(text="Void this transaction?")[m
[32m+[m			[32mself.print_void_transaction_info(row[0], row[4], row[5], row[8], row[9], row[7])[m
[32m+[m			[32mroot.wait_variable(self.state_manager.yes_no_var)[m
[32m+[m			[32mbutton_pressed = self.state_manager.yes_no_var.get()[m
 			if button_pressed == "yes":[m
 				try:[m
 [m
 					void_cursor.execute('''UPDATE SALES SET Voided = ? WHERE "Transaction ID" = ?''', (1, row[0]))[m
 					void_cursor.execute('''SELECT * FROM SALEITEMS WHERE "Transaction ID" = ?''', (row[0], ))[m
 					item_results = void_cursor.fetchall()[m
[31m-				print_receipt("void", row[0], item_results, row)[m
[32m+[m					[32mself.print_receipt("void", row[0], item_results, row)[m
 				except sqlite3.Error as e:[m
[31m-				additional_register_functions_text.delete("1.0", "end")[m
[31m-				additional_register_functions_text.insert("end", "ERROR, please try again")[m
[32m+[m					[32mself.ui.additional_register_functions_text.delete("1.0", "end")[m
[32m+[m					[32mself.ui.additional_register_functions_text.insert("end", "ERROR, please try again")[m
 				finally:[m
 					void_conn.commit()[m
 					void_conn.close()[m
[31m-				additional_register_functions_text.grid_forget()[m
[31m-				additional_register_functions_yes_no.grid_forget()[m
[31m-				enter_register_frame()[m
[31m-				additional_register_functions_label.config(text="Please select an option")[m
[31m-				last_button.grid(row=1, column=1, sticky='nsew')[m
[31m-				number_button.grid(row=2, column=1, sticky='nsew')[m
[31m-[m
[31m-[m
[31m-[m
[31m-def print_void_transaction_info(transaction_id, total, number_items_sold, cash_used, cc_used, time):[m
[31m-		additional_register_functions_text.delete("1.0", "end")[m
[31m-		additional_register_functions_text.insert("end", "Transaction ID: " + str(transaction_id) + " |\t")[m
[31m-		additional_register_functions_text.insert("end", "Total: $" + f"{total:.2f}" + "\n")[m
[31m-		additional_register_functions_text.insert("end", "# Items Sold: " + str(number_items_sold) + " |\t")[m
[31m-		additional_register_functions_text.insert("end", "Cash Used: $" + f"{cash_used:.2f}" + "\n")[m
[31m-		additional_register_functions_text.insert("end", "CC Used: $" + f"{cc_used:.2f}" + " |\t")[m
[31m-		additional_register_functions_text.insert("end", "Time: " + time)[m
[31m-[m
[31m-def print_receipt(receipt_type, transaction_id, items, sale_info):[m
[32m+[m					[32mself.ui.additional_register_functions_text.grid_forget()[m
[32m+[m					[32mself.ui.additional_register_functions_yes_no.grid_forget()[m
[32m+[m					[32mself.enter_register_frame()[m
[32m+[m					[32mself.ui.additional_register_functions_label.config(text="Please select an option")[m
[32m+[m					[32mself.ui.last_button.grid(row=1, column=1, sticky='nsew')[m
[32m+[m					[32mself.ui.number_button.grid(row=2, column=1, sticky='nsew')[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m	[32mdef print_void_transaction_info([m
[32m+[m			[32mself, transaction_id, total, number_items_sold,[m
[32m+[m			[32mcash_used, cc_used, time):[m
[32m+[m			[32mself.ui.additional_register_functions_text.delete("1.0", "end")[m
[32m+[m			[32mself.ui.additional_register_functions_text.insert("end", "Transaction ID: " + str(transaction_id) + " |\t")[m
[32m+[m			[32mself.ui.additional_register_functions_text.insert("end", "Total: $" + f"{total:.2f}" + "\n")[m
[32m+[m			[32mself.ui.additional_register_functions_text.insert("end", "# Items Sold: " + str(number_items_sold) + " |\t")[m
[32m+[m			[32mself.ui.additional_register_functions_text.insert("end", "Cash Used: $" + f"{cash_used:.2f}" + "\n")[m
[32m+[m			[32mself.ui.additional_register_functions_text.insert("end", "CC Used: $" + f"{cc_used:.2f}" + " |\t")[m
[32m+[m			[32mself.ui.additional_register_functions_text.insert("end", "Time: " + time)[m
[32m+[m
[32m+[m	[32mdef print_receipt([m
[32m+[m			[32mself, receipt_type, transaction_id,[m
[32m+[m			[32mitems, sale_info, cash_tend = None, cc_tend = None):[m
 		if receipt_type == "void":[m
[31m-			printer.textln(("-" * 42))[m
[31m-			printer.textln(("-" * 12) + " Void Transaction " + ("-" * 12))[m
[31m-			printer.textln(("-" * 42))[m
[32m+[m				[32mself.printer.textln(("-" * 42))[m
[32m+[m				[32mself.printer.textln(("-" * 12) + " Void Transaction " + ("-" * 12))[m
[32m+[m				[32mself.printer.textln(("-" * 42))[m
 				spaces = 17 - len(str(transaction_id))[m
[31m-			printer.textln("Original Transaction ID: " + (" " * spaces) + str(transaction_id))[m
[32m+[m				[32mself.printer.textln("Original Transaction ID: " + (" " * spaces) + str(transaction_id))[m
 		elif receipt_type == "sale":[m
[31m-			printer.textln(("-" * 18) + " Sale " + ("-" * 18))[m
[31m-			spaces = 26 - len(str(transaction_id))[m
[31m-			printer.textln("Transaction ID: " + (" " * spaces) + str(transaction_id))[m
[32m+[m				[32mself.printer.textln(("-" * 18) + " Sale " + ("-" * 18))[m
[32m+[m				[32mspaces = self.config.printing_width - 16 - len(str(transaction_id))[m
[32m+[m				[32mself.printer.textln("Transaction ID: " + (" " * spaces) + str(transaction_id))[m
 		elif receipt_type == "return":[m
[31m-			printer.textln(("-" * 17) + " Return " + ("-" * 17))[m
[32m+[m				[32mself.printer.textln(("-" * 17) + " Return " + ("-" * 17))[m
 				spaces = 26 - len(str(transaction_id))[m
[31m-			printer.textln("Transaction ID: " + (" " * spaces) + str(transaction_id))[m
[32m+[m				[32mself.printer.textln("Transaction ID: " + (" " * spaces) + str(transaction_id))[m
 				for i in (1, 2, 4, 5):[m
 					sale_info[i] *= -1[m
[31m-	printer.textln(datetime.today().strftime('%Y-%m-%d') + (" " * 27) + datetime.now().strftime("%H:%M"))[m
[31m-	printer.ln(2)[m
[32m+[m		[32mself.printer.textln(datetime.today().strftime('%Y-%m-%d') + (" " * 27) + datetime.now().strftime("%H:%M"))[m
[32m+[m		[32mself.printer.ln(2)[m
 		for i in range(len(items)):[m
[31m-			printer.textln(items[i][1])[m
[32m+[m				[32mself.printer.textln(items[i][1])[m
 				if items[i][3] == 1:[m
[31m-				printer.text("TX ")[m
[32m+[m					[32mself.printer.text("TX ")[m
 				else:[m
[31m-				printer.text("NT ")[m
[31m-			printer.textln("$" + f"{items[i][2]:.2f}" + " QTY " + str(items[i][5]))[m
[32m+[m					[32mself.printer.text("NT ")[m
[32m+[m				[32mself.printer.textln("$" + f"{items[i][2]:.2f}" + " QTY " + str(items[i][5]))[m
 		[m
[31m-	printer.ln(1)[m
[32m+[m		[32mself.printer.ln(1)[m
 		if sale_info[3] != 0:[m
[31m-		printer.ln(1)[m
[32m+[m			[32mself.printer.ln(1)[m
 			rounded = f"{sale_info[1]+sale_info[2]:.2f}"[m
 			spaces = 31 - len(rounded)[m
[31m-		printer.textln("Subtotal: " + (" " * spaces) + "$" + rounded)[m
[32m+[m			[32mself.printer.textln("Subtotal: " + (" " * spaces) + "$" + rounded)[m
 			rounded = f"{sale_info[3]:.2f}"[m
 			spaces = 36 - len(rounded)[m
[31m-		printer.textln("Tax: " + (" " * spaces) + "$" + rounded)[m
[32m+[m			[32mself.printer.textln("Tax: " + (" " * spaces) + "$" + rounded)[m
 		rounded = f"{sale_info[4]:.2f}"[m
 		spaces = 34 - len(rounded)[m
[31m-	printer.textln("Total: " + (" " * spaces) + "$" + rounded)[m
[31m-	printer.ln(2)[m
[31m-	#printer.cut()[m
[31m-	[m
[31m-[m
[31m-def on_additional_register_functions_entry(event=None):[m
[31m-	state_manager.reference_number_var.set(additional_register_functions_entry.get())[m
[31m-[m
[31m-		[m
[31m-def on_cash_cc(event, payment_method):[m
[32m+[m		[32mself.printer.textln("Total: " + (" " * spaces) + "$" + rounded)[m
[32m+[m		[32mif cash_tend != 0:[m
[32m+[m			[32mrounded = f"{cash_tend:.2f}"[m
[32m+[m			[32mspaces = self.config.printing_width - 16 - len(rounded)[m
[32m+[m			[32mself.printer.textln("Cash Tendered: " + (" " * spaces) + "$" + rounded)[m
[32m+[m		[32mif cc_tend != 0:[m
[32m+[m			[32mrounded = f"{cc_tend:.2f}"[m
[32m+[m			[32mspaces = self.config.printing_width - 14 - len(rounded)[m
[32m+[m			[32mself.printer.textln("CC Tendered: " + (" " * spaces) + "$" + rounded)[m
[32m+[m		[32mchange = f"{abs(sale_info[4] - cash_tend - cc_tend):.2f}"[m
[32m+[m		[32mspaces = self.config.printing_width - 13 - len(change)[m
[32m+[m		[32mself.printer.textln("Change Due: " + (" " * spaces) + "$" + change)[m
[32m+[m		[32mself.printer.ln(2)[m
[32m+[m		[32mself.printer.cut()[m
[32m+[m[41m		[m
[32m+[m
[32m+[m	[32mdef on_additional_register_functions_entry(self, event=None):[m
[32m+[m		[32mself.state_manager.reference_number_var.set(self.ui.additional_register_functions_entry.get())[m
[32m+[m
[32m+[m[41m			[m
[32m+[m	[32mdef on_cash_cc(self, payment_method):[m
 		pygame.mixer.music.load("short-beep.mp3")[m
 		pygame.mixer.music.play()[m
[31m-	old_balance = state_manager.trans.total - state_manager.trans.cash_used - state_manager.trans.cc_used 	# Calculate current balance remaining on the sale[m
[32m+[m		[32mold_balance = self.state_manager.trans.total - self.state_manager.trans.cash_used - self.state_manager.trans.cc_used 	# Calculate current balance remaining on the sale[m
 		if payment_method == "cc":[m
[31m-		entered_amount = invisible_entry.get()[m
[32m+[m			[32mentered_amount = self.ui.invisible_entry.get()[m
 			entered_amount = entered_amount[:-1][m
[32m+[m			[32mprint(entered_amount)[m
 		elif payment_method == "cash":[m
[31m-		entered_amount = invisible_entry.get().strip()	[m
[31m-	invisible_entry.delete(0, tk.END)[m
[32m+[m			[32mentered_amount = self.ui.invisible_entry.get().strip()[m[41m	[m
[32m+[m		[32mself.ui.invisible_entry.delete(0, tk.END)[m
 		length = len(entered_amount)[m
 		if entered_amount == "":			# If user just pressed cash or credit card button, [m
 			if payment_method == "cash":	# entire balance is being settled as such[m
[31m-			state_manager.trans.cash_used += old_balance[m
[32m+[m				[32mself.state_manager.trans.cash_used += old_balance[m
 			elif payment_method == "cc":[m
[31m-			state_manager.trans.cc_used += old_balance[m
[31m-		display_string = "C $0.00"[m
[31m-		total_entry.delete(0, tk.END)[m
[31m-		total_entry.insert(tk.END, display_string)[m
[31m-		complete_sale()[m
[32m+[m				[32mself.state_manager.trans.cc_used += old_balance[m
[32m+[m			[32mdisplay_string = f"Sale Total: {self.state_manager.trans.total:.2f}"[m
[32m+[m			[32mself.ui.total_entry.delete(0, tk.END)[m
[32m+[m			[32mself.ui.total_entry.insert(tk.END, display_string)[m
[32m+[m			[32mself.complete_sale()[m
 			return "break"[m
 		elif entered_amount != "":			# Otherwise, we need to format the user's input[m
 			amount_given = 0[m
[36m@@ -294,74 +272,176 @@[m [mdef on_cash_cc(event, payment_method):[m
 					amount_given = float("0." + entered_amount)[m
 			elif length>=3:					[m
 					amount_given = float(entered_amount[0:length-2] + "." + entered_amount[length-2:length])[m
[31m-		[m
[31m-		new_balance = state_manager.trans.total - state_manager.trans.cash_used - state_manager.trans.cc_used - amount_given[m
[32m+[m					[32mprint(amount_given)[m
[32m+[m			[32mnew_balance = self.state_manager.trans.total - self.state_manager.trans.cash_used - self.state_manager.trans.cc_used - amount_given[m
[32m+[m			[32mif payment_method == "cc" and new_balance < 0:[m
[32m+[m				[32mself.ui.total_entry.delete(0, tk.END)[m
[32m+[m				[32mself.ui.total_entry.insert(tk.END, "ERR: CC Amount exceeds balance")[m
[32m+[m				[32mreturn "break"[m
[32m+[m			[32mcomplete = False[m
 			if new_balance<=0:[m
 				display_string = "C: $" + f"{abs(new_balance):.2f}"[m
[31m-			if payment_method == "cc":[m
[31m-				state_manager.trans.cc_used += old_balance[m
[31m-			elif payment_method == "cash":[m
[31m-				state_manager.trans.cash_used += old_balance[m
[31m-			total_entry.delete(0, tk.END)[m
[31m-			total_entry.insert(tk.END, display_string)[m
[31m-			complete_sale()[m
[32m+[m				[32mcomplete = True[m
 			elif new_balance>0:[m
 				display_string = "B: $" + f"{abs(new_balance):.2f}" [m
[31m-			if payment_method == "cc":[m
[31m-				state_manager.trans.cc_used += old_balance[m
[31m-			elif payment_method == "cash":[m
[31m-				state_manager.trans.cash_used += old_balance[m
[31m-			total_entry.delete(0, tk.END)[m
[31m-			total_entry.insert(tk.END, display_string)[m
 			elif new_balance==0:[m
 				display_string = "C: $0.00"[m
[32m+[m				[32mcomplete = True[m
[32m+[m
 			if payment_method == "cc":[m
[31m-				state_manager.trans.cc_used += old_balance[m
[32m+[m				[32mself.state_manager.trans.cc_used += (amount_given - old_balance)[m
[32m+[m				[32mself.state_manager.trans.cc_tendered += amount_given[m
[32m+[m				[32mprint(str(self.state_manager.trans.cc_used))[m
 			elif payment_method == "cash":[m
[31m-				state_manager.trans.cash_used += old_balance[m
[31m-			total_entry.delete(0, tk.END)[m
[31m-			total_entry.insert(tk.END, display_string)[m
[31m-			complete_sale()[m
[32m+[m				[32mself.state_manager.trans.cash_used += (amount_given - old_balance)[m
[32m+[m				[32mself.state_manager.trans.cash_tendered += amount_given[m
[32m+[m[41m			[m
[32m+[m			[32mself.ui.total_entry.delete(0, tk.END)[m
[32m+[m			[32mself.ui.total_entry.insert(tk.END, display_string)[m
[32m+[m
[32m+[m			[32mif complete:[m
[32m+[m				[32mself.complete_sale()[m
[32m+[m
[32m+[m		[32mreturn "break"[m
[32m+[m[41m	[m
[32m+[m	[32mdef on_cash(self, event = None):[m
[32m+[m
[32m+[m		[32mif self.state_manager.trans.total == 0:[m
[32m+[m			[32mreturn "break"[m
[32m+[m[41m		[m
[32m+[m		[32mpygame.mixer.music.load("short-beep.mp3")[m
[32m+[m		[32mpygame.mixer.music.play()[m
[32m+[m
[32m+[m		[32mentered_amount = self.ui.invisible_entry.get().strip()[m
[32m+[m		[32mself.ui.invisible_entry.delete(0, tk.END)[m
[32m+[m		[32mlength = len(entered_amount)[m
[32m+[m[41m		[m
[32m+[m		[32mbalance = round(self.state_manager.trans.total - self.state_manager.trans.cash_used - self.state_manager.trans.cc_used, 2)[m
[32m+[m		[32mamount_given = 0.0[m
[32m+[m[41m		[m
[32m+[m		[32mif length == 0:[m
[32m+[m			[32mself.state_manager.trans.cash_tendered += balance[m
[32m+[m			[32mself.state_manager.trans.cash_used += balance[m
[32m+[m			[32mself.ui.total_entry.delete(0, tk.END)[m
[32m+[m			[32mself.ui.total_entry.insert(tk.END, "C: $0.00")[m
[32m+[m			[32mself.ui.usr_entry.delete(0, tk.END)[m
[32m+[m			[32mself.ui.usr_entry.insert(tk.END, f"Sale Total: ${self.state_manager.trans.total:.2f}")[m
[32m+[m			[32mself.complete_sale()[m
[32m+[m			[32mreturn "break"[m
[32m+[m		[32melif length == 1:[m
[32m+[m			[32mamount_given = float("0.0" + entered_amount)[m
[32m+[m		[32melif length == 2:[m
[32m+[m			[32mamount_given = float("0." + entered_amount)[m
[32m+[m		[32melif length == 3:[m
[32m+[m			[32mamount_given = float(entered_amount[0:length-2] + "." + entered_amount[length-2:length])[m
[32m+[m[41m		[m
[32m+[m		[32mdisplay_string = ""[m[41m [m
[32m+[m		[32mcomplete = False[m
[32m+[m
[32m+[m		[32mif amount_given == balance:[m
[32m+[m			[32mself.state_manager.trans.cash_tendered += amount_given[m
[32m+[m			[32mself.state_manager.trans.cash_used += amount_given[m
[32m+[m			[32mdisplay_string = "C: $0.00"[m
[32m+[m			[32mcomplete = True[m
[32m+[m		[32melif amount_given > balance:[m
[32m+[m			[32mself.state_manager.trans.cash_tendered += amount_given[m
[32m+[m			[32mself.state_manager.trans.cash_used += balance[m
[32m+[m			[32mdisplay_string = "C: $" + f"{abs(balance-amount_given):.2f}"[m
[32m+[m			[32mcomplete = True[m
[32m+[m		[32melif amount_given < balance:[m
[32m+[m			[32mself.state_manager.trans.cash_tendered += amount_given[m
[32m+[m			[32mself.state_manager.trans.cash_used += amount_given[m
[32m+[m			[32mdisplay_string = "B: $" + f"{(balance - amount_given):.2f}"[m
[32m+[m
[32m+[m		[32mself.ui.total_entry.delete(0, tk.END)[m
[32m+[m		[32mself.ui.total_entry.insert(tk.END, display_string)[m
[32m+[m
[32m+[m		[32mif complete:[m
[32m+[m			[32mself.ui.usr_entry.delete(0, tk.END)[m
[32m+[m			[32mself.ui.usr_entry.insert(tk.END, f"Sale Total: ${self.state_manager.trans.total:.2f}")[m
[32m+[m			[32mself.complete_sale()[m
[32m+[m
[32m+[m	[32mdef on_cc(self, event = None):[m
[32m+[m
[32m+[m		[32mif self.state_manager.trans.total == 0:[m
 			return "break"[m
 		[m
[31m-def cancel_trans(event=None):[m
[31m-	global state_manager[m
[31m-	state_manager.new_transaction()[m
 		pygame.mixer.music.load("short-beep.mp3")[m
 		pygame.mixer.music.play()[m
[31m-	sale_items.delete("1.0", "end")[m
[31m-	invisible_entry.delete(0, tk.END)[m
[31m-	usr_entry.delete(0, tk.END)[m
[31m-	usr_entry.insert(0, "$0.00")[m
 [m
[32m+[m		[32mentered_amount = self.ui.invisible_entry.get().strip()[m
[32m+[m		[32mentered_amount = entered_amount[:-1][m
[32m+[m		[32mself.ui.invisible_entry.delete(0, tk.END)[m
[32m+[m		[32mlength = len(entered_amount)[m
 		[m
[32m+[m		[32mbalance = round(self.state_manager.trans.total - self.state_manager.trans.cash_used - self.state_manager.trans.cc_used, 2)[m
[32m+[m		[32mamount_given = 0.0[m
 		[m
[31m-def complete_sale(event=None):[m
[31m-	global state_manager[m
[31m-	printer.cashdraw(pin=2)[m
[31m-	state_manager.trans.complete_transaction()[m
[31m-	sale_conn = sqlite3.connect("RegisterDatabase")[m
[31m-	sale_cursor = sale_conn.cursor()[m
[31m-	sale_cursor.execute('''SELECT * FROM SALES WHERE "Transaction ID" = (SELECT MAX("Transaction ID") FROM SALES)''')[m
[31m-	results = sale_cursor.fetchall()[m
[32m+[m		[32mif length == 0:[m
[32m+[m			[32mself.state_manager.trans.cc_used += balance[m
[32m+[m			[32mself.state_manager.trans.cc_tendered += balance[m
[32m+[m			[32mself.ui.total_entry.delete(0, tk.END)[m
[32m+[m			[32mself.ui.total_entry.insert(tk.END, "C: $0.00")[m
[32m+[m			[32mself.ui.usr_entry.delete(0, tk.END)[m
[32m+[m			[32mself.ui.usr_entry.insert(tk.END, f"Sale Total: ${self.state_manager.trans.total:.2f}")[m
[32m+[m			[32mself.complete_sale()[m
[32m+[m			[32mreturn "break"[m
[32m+[m		[32melif length == 1:[m
[32m+[m			[32mamount_given = float("0.0" + entered_amount)[m
[32m+[m		[32melif length == 2:[m
[32m+[m			[32mamount_given = float("0." + entered_amount)[m
[32m+[m		[32melif length == 3:[m
[32m+[m			[32mamount_given = float(entered_amount[0:length-2] + "." + entered_amount[length-2:length])[m
[32m+[m[41m		[m
[32m+[m		[32mif amount_given > balance:[m
[32m+[m			[32mself.ui.total_entry.insert(tk.END, "ERR: CC")[m
[32m+[m			[32mreturn "break"[m
[32m+[m[41m		[m
[32m+[m		[32mdisplay_string = ""[m[41m [m
[32m+[m		[32mcomplete = False[m
[32m+[m
[32m+[m		[32mif amount_given == balance:[m
[32m+[m			[32mself.state_manager.trans.cc_tendered += amount_given[m
[32m+[m			[32mself.state_manager.trans.cc_used += amount_given[m
[32m+[m			[32mdisplay_string = "C: $0.00"[m
[32m+[m			[32mcomplete = True[m
[32m+[m		[32melif amount_given < balance:[m
[32m+[m			[32mself.state_manager.trans.cc_tendered += amount_given[m
[32m+[m			[32mself.state_manager.trans.cc_used += amount_given[m
[32m+[m			[32mdisplay_string = "B: $" + f"{(balance - amount_given):.2f}"[m
[32m+[m
[32m+[m		[32mself.ui.total_entry.delete(0, tk.END)[m
[32m+[m		[32mself.ui.total_entry.insert(tk.END, display_string)[m
[32m+[m
[32m+[m		[32mif complete:[m
[32m+[m			[32mself.ui.usr_entry.delete(0, tk.END)[m
[32m+[m			[32mself.ui.usr_entry.insert(tk.END, f"Sale Total: ${self.state_manager.trans.total:.2f}")[m
[32m+[m			[32mself.complete_sale()[m
[32m+[m
[32m+[m
[32m+[m	[32mdef complete_sale(self, event=None):[m
[32m+[m[41m		[m
[32m+[m		[32mself.printer.cashdraw(pin=2)[m
[32m+[m		[32mself.state_manager.trans.complete_transaction()[m
[32m+[m		[32mself.state_manager.cursor.execute('''SELECT * FROM SALES WHERE "Transaction ID" = (SELECT MAX("Transaction ID") FROM SALES)''')[m
[32m+[m		[32mresults = self.state_manager.cursor.fetchall()[m
 		sale_info = results[0][m
[31m-	sale_cursor.execute('''SELECT * FROM SALEITEMS WHERE "Transaction ID" = ?''', (sale_info[0], ))[m
[31m-	sale_items_list = sale_cursor.fetchall()[m
[31m-	sale_conn.close()[m
[31m-	print_receipt("sale", sale_info[0], sale_items_list, sale_info)[m
[31m-	sale_items.delete("1.0", "end")[m
[31m-	usr_entry.delete(0, tk.END)[m
[31m-	usr_entry.insert(0, "$0.00")[m
[31m-	state_manager.new_transaction()[m
[31m-	[m
[31m-def number_pressed(event=None, input_widget=None, output_widget=None):[m
[32m+[m		[32mself.state_manager.cursor.execute('''SELECT * FROM SALEITEMS WHERE "Transaction ID" = ?''', (sale_info[0], ))[m
[32m+[m		[32msale_items_list = self.state_manager.cursor.fetchall()[m
[32m+[m		[32mself.print_receipt("sale", sale_info[0], sale_items_list, sale_info, self.state_manager.trans.cash_tendered, self.state_manager.trans.cc_tendered)[m
[32m+[m		[32mself.ui.sale_items_listbox.delete(0, tk.END)[m
[32m+[m		[32m#self.ui.usr_entry.delete(0, tk.END)[m
[32m+[m		[32m#self.ui.usr_entry.insert(0, "$0.00")[m
[32m+[m		[32mself.state_manager.new_transaction()[m
[32m+[m[41m		[m
[32m+[m	[32mdef number_pressed(self, event=None, input_widget=None, output_widget=None):[m
 		pygame.mixer.music.load("short-beep.mp3")[m
 		pygame.mixer.music.play()[m
 [m
 		if input_widget is None:[m
[31m-		input_widget = invisible_entry[m
[32m+[m			[32minput_widget = self.ui.invisible_entry[m
 		if output_widget is None:[m
[31m-		output_widget = total_entry[m
[32m+[m			[32moutput_widget = self.ui.total_entry[m
 [m
 		entry = input_widget.get().strip()[m
 		length = len(entry)[m
[36m@@ -378,589 +458,359 @@[m [mdef number_pressed(event=None, input_widget=None, output_widget=None):[m
 		output_widget.insert(tk.END, display_string)[m
 [m
 [m
[31m-def clear(event=None):[m
[32m+[m	[32mdef clear(self, event=None):[m
 		pygame.mixer.music.load("short-beep.mp3")[m
 		pygame.mixer.music.play()[m
[31m-	invisible_entry.delete(0, tk.END)[m
[31m-	total_entry.delete(0, tk.END)[m
[31m-	total_entry.insert(tk.END, "$0.00")[m
[31m-		[m
[31m-def get_update_barcode(event=None):[m
[31m-	state_manager.update_inventory_var.set(update_inventory_entry.get())[m
[31m-	state_manager.update_inventory_entry.delete(0, tk.END)[m
[31m-	[m
[31m-def update_inventory(which_button, entered_barcode):[m
[31m-	update_conn = sqlite3.connect("RegisterDatabase")[m
[31m-	update_cursor = update_conn.cursor()[m
[31m-	update_buttons_frame.grid_forget()[m
[31m-	update_inventory_entry.grid(row=1, column=1, sticky='nsew')[m
[32m+[m		[32mself.ui.invisible_entry.delete(0, tk.END)[m
[32m+[m		[32mself.ui.total_entry.delete(0, tk.END)[m
[32m+[m		[32mself.ui.total_entry.insert(tk.END, "$0.00")[m
[32m+[m[41m			[m
[32m+[m	[32mdef get_update_barcode(self, event=None):[m
[32m+[m		[32mself.state_manager.update_inventory_var.set(self.ui.update_inventory_entry.get())[m
[32m+[m		[32mself.ui.update_inventory_entry.delete(0, tk.END)[m
[32m+[m[41m		[m
[32m+[m	[32mdef update_inventory(self, which_button, entered_barcode):[m
[32m+[m		[32mself.ui.update_buttons_frame.grid_forget()[m
[32m+[m		[32mself.ui.update_inventory_entry.grid(row=1, column=1, sticky='nsew')[m
 		if (entered_barcode):[m
 			barcode = entered_barcode[m
 		else:[m
[31m-		update_inventory_label.config(text="Please scan barcode of item")[m
[31m-		root.wait_variable(state_manager.update_inventory_var)[m
[31m-		barcode = state_manager.update_inventory_var.get()[m
[31m-	update_cursor.execute("SELECT %s FROM INVENTORY WHERE barcode = ?" % (which_button), (barcode,))[m
[31m-	results = update_cursor.fetchall()[m
[32m+[m			[32mself.ui.update_inventory_label.config(text="Please scan barcode of item")[m
[32m+[m			[32mroot.wait_variable(self.state_manager.update_inventory_var)[m
[32m+[m			[32mbarcode = self.state_manager.update_inventory_var.get()[m
[32m+[m		[32mself.state_manager.cursor.execute("SELECT %s FROM INVENTORY WHERE barcode = ?" % (which_button), (barcode,))[m
[32m+[m		[32mresults = self.state_manager.cursor.fetchall()[m
 		row = results[0][m
 		current_value = row[0][m
 		while True:[m
 			if which_button == "Taxable":[m
 				if current_value == 1:[m
[31m-				update_inventory_label.config(text="Item is Currently Taxable\nSwitch to Non-Taxable?")[m
[32m+[m					[32mself.ui.update_inventory_label.config(text="Item is Currently Taxable\nSwitch to Non-Taxable?")[m
 				elif current_value == 0:		[m
[31m-				update_inventory_label.config(text="Item is Currently Non-Taxable\nSwitch to Taxable?")[m
[32m+[m					[32mself.ui.update_inventory_label.config(text="Item is Currently Non-Taxable\nSwitch to Taxable?")[m
 [m
[31m-			update_inventory_entry.grid_forget()[m
[31m-			update_inventory_yes_no.grid(row=1, column=1, sticky='nsew')[m
[31m-			root.wait_variable(state_manager.yes_no_var)[m
[31m-			yes_no_answer = state_manager.yes_no_var.get()[m
[32m+[m				[32mself.ui.update_inventory_entry.grid_forget()[m
[32m+[m				[32mself.ui.update_inventory_yes_no.grid(row=1, column=1, sticky='nsew')[m
[32m+[m				[32mroot.wait_variable(self.state_manager.yes_no_var)[m
[32m+[m				[32myes_no_answer = self.state_manager.yes_no_var.get()[m
 				if yes_no_answer == "yes":[m
[31m-				update_cursor.execute("UPDATE INVENTORY SET Taxable = ? Where Barcode = ?", (not current_value, barcode,))[m
[32m+[m					[32mself.state_manager.cursor.execute("UPDATE INVENTORY SET Taxable = ? Where Barcode = ?", (not current_value, barcode,))[m
 					break[m
 				elif yes_no_answer == "no":[m
[31m-				update_inventory_yes_no.grid_forget()[m
[31m-				update_inventory_entry.grid(row=1, column=1, sticky='nsew')[m
[32m+[m					[32mself.ui.update_inventory_yes_no.grid_forget()[m
[32m+[m					[32mself.ui.update_inventory_entry.grid(row=1, column=1, sticky='nsew')[m
 					continue[m
 			elif which_button != "Taxable":[m
[31m-			update_inventory_label.config(text=f"Current {which_button} is:\n" + str(current_value) + f"\nPlease Enter Item's New {which_button}")[m
[31m-			root.wait_variable(state_manager.update_inventory_var)[m
[31m-			new_value = state_manager.update_inventory_var.get()[m
[31m-			update_inventory_label.config(text=f"New {which_button} will be:\n" + new_value + "\nIs this correct?")[m
[31m-			update_inventory_entry.grid_forget()[m
[31m-			update_inventory_yes_no.grid(row=1, column=1, sticky='nsew')[m
[31m-			root.wait_variable(state_manager.yes_no_var)[m
[31m-			yes_no_answer = state_manager.yes_no_var.get()[m
[31m-			update_inventory_yes_no.grid_forget()[m
[32m+[m				[32mself.ui.update_inventory_label.config(text=f"Current {which_button} is:\n" + str(current_value) + f"\nPlease Enter Item's New {which_button}")[m
[32m+[m				[32mroot.wait_variable(self.state_manager.update_inventory_var)[m
[32m+[m				[32mnew_value = self.state_manager.update_inventory_var.get()[m
[32m+[m				[32mself.ui.update_inventory_label.config(text=f"New {which_button} will be:\n" + new_value + "\nIs this correct?")[m
[32m+[m				[32mself.ui.update_inventory_entry.grid_forget()[m
[32m+[m				[32mself.ui.update_inventory_yes_no.grid(row=1, column=1, sticky='nsew')[m
[32m+[m				[32mroot.wait_variable(self.state_manager.yes_no_var)[m
[32m+[m				[32myes_no_answer = self.state_manager.yes_no_var.get()[m
[32m+[m				[32mself.ui.update_inventory_yes_no.grid_forget()[m
 				if yes_no_answer == "yes":[m
[31m-				update_cursor.execute("UPDATE INVENTORY SET %s = ? WHERE %s = ?" % (which_button, which_button), (new_value, current_value, ))[m
[32m+[m					[32mself.state_manager.cursor.execute("UPDATE INVENTORY SET %s = ? WHERE %s = ?" % (which_button, which_button), (new_value, current_value, ))[m
 					break[m
 				elif yes_no_answer == "no":[m
[31m-				update_inventory_entry.grid(row=1, column=1, sticky='nsew')[m
[32m+[m					[32mself.ui.update_inventory_entry.grid(row=1, column=1, sticky='nsew')[m
 					continue[m
[31m-	update_inventory_yes_no.grid_forget()[m
[31m-	update_buttons_frame.grid(column = 1, row=1, sticky='nsew')[m
[31m-	update_inventory_label.config(text="What would you\nlike to update?")[m
[31m-	update_conn.commit()[m
[31m-	update_conn.close()[m
[31m-	admin_frame.tkraise()[m
[31m-[m
[31m-def no_sale(event=None):[m
[31m-	global state_manager[m
[31m-	invisible_entry.delete(0, tk.END)[m
[31m-	#printer.cashdraw(pin=2)[m
[31m-	#printer.textln(("-" * 22) + " NS " + ("-" * 22))[m
[31m-	#printer.textln(datetime.today().strftime('%Y-%m-%d') + (" " * 33) + datetime.now().strftime("%H:%M"))[m
[31m-	#printer.ln(2)[m
[31m-	state_manager.trans.c.execute([m
[31m-		"INSERT INTO no_sale (date, times_pressed) VALUES (?, ?) ON CONFLICT (date)" \[m
[31m-		" DO UPDATE SET times_pressed = times_pressed + 1",[m
[31m-		  (datetime.today().strftime('%Y-%m-%d'), 1))[m
[31m-	[m
[32m+[m		[32mself.ui.update_inventory_yes_no.grid_forget()[m
[32m+[m		[32mself.ui.update_buttons_frame.grid(column = 1, row=1, sticky='nsew')[m
[32m+[m		[32mself.ui.update_inventory_label.config(text="What would you\nlike to update?")[m
[32m+[m		[32mself.state_manager.conn.commit()[m
[32m+[m		[32mself.state_manager.conn.close()[m
[32m+[m		[32mself.ui.admin_frame.tkraise()[m
[32m+[m
[32m+[m	[32mdef no_sale(self, event=None):[m
[32m+[m[41m		[m
[32m+[m		[32mself.ui.invisible_entry.delete(0, tk.END)[m
[32m+[m		[32mself.printer.cashdraw(pin=2)[m
[32m+[m		[32mself.printer.textln(("-" * 22) + " NS " + ("-" * 22))[m
[32m+[m		[32mself.printer.textln(datetime.today().strftime('%Y-%m-%d') + (" " * 33) + datetime.now().strftime("%H:%M"))[m
[32m+[m		[32mself.printer.ln(2)[m
[32m+[m		[32mself.state_manager.cursor.execute([m
[32m+[m			[32m"UPDATE no_sale SET times_pressed = times_pressed + 1 WHERE date = ?",[m
[32m+[m			[32m(datetime.today().strftime('%Y-%m-%d'),))[m
[32m+[m		[32mself.state_manager.conn.commit()[m
 		return "break"[m
[31m-	#printer.cut()[m
 		[m
 [m
 																					[m
[31m-def go_back():[m
[31m-	global state_manager[m
[32m+[m
[32m+[m	[32mdef go_back(self):[m
[32m+[m[41m		[m
 		# Logic for back button during adding an item[m
 		# If you're not on the first page, go back one[m
[31m-	# If state_manager.add_item_index is 0, it should stay as such[m
[31m-	if state_manager.add_item_index != 0:[m
[31m-		state_manager.add_item_index -= 1[m
[31m-	# Acording to what state_manager.add_item_index you've gone back to, update[m
[32m+[m		[32m# If self.state_manager.add_item_index is 0, it should stay as such[m
[32m+[m		[32mif self.state_manager.add_item_index != 0:[m
[32m+[m			[32mself.state_manager.add_item_index -= 1[m
[32m+[m		[32mprint(f"new index: {self.state_manager.add_item_index}")[m
[32m+[m		[32m# Acording to what self.state_manager.add_item_index you've gone back to, update[m
 		# label so it is asking for correct information[m
[31m-	match state_manager.add_item_index:[m
[32m+[m		[32mmatch self.state_manager.add_item_index:[m
 			case 0:[m
[31m-			add_item_label.config(text="Please enter item's barcode:")[m
[32m+[m				[32mself.ui.add_item_label.config(text="Please enter item's barcode:")[m
 			case 1:[m
[31m-			add_item_label.config(text="Please enter item's name:")[m
[31m-			add_item_entry.unbind("<FocusIn>", state_manager.binding_manager)[m
[31m-			add_item_entry.delete(0, tk.END)[m
[31m-			add_item_entry.focus_set()[m
[32m+[m				[32mself.ui.add_item_label.config(text="Please enter item's name:")[m
[32m+[m				[32mself.ui.add_item_entry.unbind("<FocusIn>", self.state_manager.binding_manager)[m
[32m+[m				[32mself.ui.add_item_entry.delete(0, tk.END)[m
[32m+[m				[32mself.ui.add_item_entry.focus_set()[m
 			case 2:[m
[31m-			state_manager.binding_manager = add_item_entry.bind("<FocusIn>", return_add_item_invisible_entry_focus)[m
[31m-			add_item_label.config(text="Please enter item's price:")[m
[31m-			add_item_entry.grid(column=1, row=1, sticky='ew', pady=15)[m
[31m-			add_item_button.grid(column=1, row=2, sticky='ew')[m
[31m-			add_item_yes_no.grid_forget()[m
[31m-			add_item_entry.insert(tk.END, "$0.00")[m
[32m+[m				[32mself.state_manager.binding_manager = self.ui.add_item_entry.bind("<FocusIn>", self.return_add_item_invisible_entry_focus)[m
[32m+[m				[32mself.ui.add_item_label.config(text="Please enter item's price:")[m
[32m+[m				[32mself.ui.add_item_entry.grid(column=1, row=1, sticky='ew', pady=15)[m
[32m+[m				[32mself.ui.add_item_button.grid(column=1, row=2, sticky='ew')[m
[32m+[m				[32mself.ui.add_item_yes_no.grid_forget()[m
[32m+[m				[32mself.ui.add_item_entry.delete(0, tk.END)[m
[32m+[m				[32mself.ui.add_item_entry.insert(tk.END, "$0.00")[m
 			case 3:[m
[31m-			state_manager.yes_no_var.set("break")[m
[31m-			add_item_frame.tkraise()[m
[31m-			add_item_entry.grid_forget()[m
[31m-			add_item_button.grid_forget()[m
[31m-			add_item_yes_no.grid(column=1, row=2, sticky='nsew')[m
[31m-			add_item_label.config(text="Is the item taxable?")[m
[31m-			on_add_item_enter()[m
[32m+[m				[32mself.ui.add_item_frame.tkraise()[m
[32m+[m				[32mself.ui.add_item_entry.grid_forget()[m
[32m+[m				[32mself.ui.add_item_button.grid_forget()[m
[32m+[m				[32mself.ui.add_item_yes_no.grid(column=1, row=2, sticky='nsew')[m
[32m+[m				[32mself.ui.add_item_label.config(text="Is the item taxable?")[m
 			case 4:[m
[31m-			add_item_label.config(text="Please enter the category:")[m
[31m-			add_item_listbox_frame.tkraise()[m
[32m+[m				[32mself.ui.add_item_label.config(text="Please enter the category:")[m
[32m+[m				[32mself.ui.add_item_listbox_frame.tkraise()[m
 			case 5:[m
[31m-			add_item_label.config(text="Please enter the quantity:")[m
[32m+[m				[32mself.ui.add_item_label.config(text="Please enter the quantity:")[m
 			[m
[31m-def reenter_button_pressed(which_button):[m
[32m+[m	[32mdef reenter_button_pressed(self, which_button):[m
 		# Essentially go back to the add item interface[m
[31m-	reenter_frame.grid_forget()[m
[31m-	add_item_entry.grid(column=1, row=1, sticky='ew', pady=15)[m
[31m-	add_item_button.grid(column=1, row=2, sticky='ew')[m
[31m-	global state_manager[m
[31m-	state_manager.reentering = True[m
[32m+[m		[32mself.ui.reenter_frame.grid_forget()[m
[32m+[m		[32mself.ui.add_item_entry.grid(column=1, row=1, sticky='ew', pady=15)[m
[32m+[m		[32mself.ui.add_item_button.grid(column=1, row=2, sticky='ew')[m
[32m+[m[41m		[m
[32m+[m		[32mself.state_manager.reentering = True[m
 		# Add item logic looks for reentering flag[m
 		# Set flag, and reenter the logic, setting labels[m
 		# and any necessary buttons accordingly[m
 		match which_button:[m
 			case "barcode":[m
[31m-			state_manager.add_item_index=0[m
[31m-			add_item_label.config(text="Please enter item's barcode:")[m
[32m+[m				[32mself.state_manager.add_item_index=0[m
[32m+[m				[32mself.ui.add_item_label.config(text="Please enter item's barcode:")[m
 			case "name":[m
[31m-			state_manager.add_item_index=1[m
[31m-			add_item_label.config(text="Please enter the item's name:")[m
[32m+[m				[32mself.state_manager.add_item_index=1[m
[32m+[m				[32mself.ui.add_item_label.config(text="Please enter the item's name:")[m
 			case "price":[m
[31m-			state_manager.add_item_index=2[m
[31m-			add_item_label.config(text="Please enter the item's price:")[m
[32m+[m				[32mself.state_manager.add_item_index=2[m
[32m+[m				[32mself.ui.add_item_label.config(text="Please enter the item's price:")[m
 			case "taxable":[m
[31m-			state_manager.add_item_index=3[m
[31m-			add_item_label.config(text="Is the item taxable?")[m
[31m-			add_item_entry.grid_forget()[m
[31m-			add_item_button.grid_forget()[m
[31m-			add_item_yes_no.grid(column=1, row=2, sticky='nsew')[m
[31m-			on_add_item_enter()[m
[32m+[m				[32mself.state_manager.add_item_index=3[m
[32m+[m				[32mself.ui.add_item_label.config(text="Is the item taxable?")[m
[32m+[m				[32mself.ui.add_item_entry.grid_forget()[m
[32m+[m				[32mself.ui.add_item_button.grid_forget()[m
[32m+[m				[32mself.ui.add_item_yes_no.grid(column=1, row=2, sticky='nsew')[m
[32m+[m				[32m#self.on_add_item_enter()[m
 			case "category":[m
[31m-			state_manager.add_item_index=4[m
[31m-			add_item_listbox_frame.tkraise()[m
[32m+[m				[32mself.state_manager.add_item_index=4[m
[32m+[m				[32mself.ui.add_item_listbox_frame.tkraise()[m
 			case "quantity":[m
[31m-			state_manager.add_item_index=5[m
[31m-			state_manager.reentering_quantity = True[m
[31m-			state_manager.reentering = False[m
[31m-			add_item_label.config(text="Please enter the Quantity:")[m
[32m+[m				[32mself.state_manager.add_item_index=5[m
[32m+[m				[32mself.state_manager.reentering_quantity = True[m
[32m+[m				[32mself.state_manager.reentering = False[m
[32m+[m				[32mself.ui.add_item_label.config(text="Please enter the Quantity:")[m
[32m+[m
 [m
 [m
[31m-def only_numbers(P):[m
[31m-	if P.isdigit() or P == "":[m
[31m-		return True[m
[31m-	else:[m
[31m-		return False[m
 		[m
[31m-def quit_button_handler(event=None):[m
[31m-	global state_manager[m
[32m+[m	[32mdef quit_button_handler(self, event=None):[m
 		[m
[31m-	if not state_manager.coming_from_register:[m
[31m-		admin_frame.tkraise()[m
[31m-	elif state_manager.coming_from_register:[m
[31m-		register_frame.tkraise()[m
 		[m
[32m+[m		[32mif not self.state_manager.coming_from_register:[m
[32m+[m			[32mself.ui.admin_frame.tkraise()[m
[32m+[m		[32melif self.state_manager.coming_from_register:[m
[32m+[m			[32mself.ui.register_frame.tkraise()[m
 [m
[31m-def on_add_item_enter(event=None, entered_barcode=None):[m
[32m+[m
[32m+[m	[32mdef on_add_item_enter(self, event=None, entered_barcode=None):[m
 		"""Handle user pressing enter or next in the context of adding and item.[m
 		Process is handled in a series of steps."""[m
[31m-	global state_manager[m
[31m-	print(state_manager.add_item_index)[m
[32m+[m[41m		[m
[32m+[m		[32mprint(self.state_manager.add_item_index)[m
 		if entered_barcode is not None:[m
 			item_info_entered = entered_barcode[m
 		else: [m
[31m-		item_info_entered = add_item_entry.get().strip()[m
[31m-		add_item_entry.delete(0, tk.END)[m
[32m+[m			[32mitem_info_entered = self.ui.add_item_entry.get().strip()[m
[32m+[m			[32mself.ui.add_item_entry.delete(0, tk.END)[m
 		[m
[31m-	match state_manager.add_item_index:[m
[32m+[m		[32mmatch self.state_manager.add_item_index:[m
 			case 0:[m
[31m-			if invf.check_item_exists(state_manager, item_info_entered, add_item_label):[m
[31m-				on_add_item_enter()[m
[32m+[m				[32mif invf.check_item_exists(self.state_manager, item_info_entered, self.ui.add_item_label):[m
[32m+[m					[32mself.on_add_item_enter()[m
 			case 1:[m
[31m-			if invf.enter_item_name(state_manager, item_info_entered, add_item_label):[m
[31m-				on_add_item_enter()[m
[31m-			add_item_entry.insert(tk.END, "$0.00")[m
[31m-			add_item_invisible_entry.config(validate='key', vcmd=vcmd)[m
[31m-			state_manager.add_item_var.trace('w', on_add_item_entry_update)[m
[31m-			add_item_invisible_entry.config(textvariable=state_manager.add_item_var)[m
[31m-			state_manager.binding_manager = add_item_entry.bind("<FocusIn>", return_add_item_invisible_entry_focus)[m
[31m-			add_item_invisible_entry.focus_set()[m
[32m+[m				[32mif invf.enter_item_name(self.state_manager, item_info_entered, self.ui.add_item_label):[m
[32m+[m					[32mself.on_add_item_enter()[m
[32m+[m				[32mself.ui.add_item_entry.insert(tk.END, "$0.00")[m
[32m+[m				[32mself.ui.add_item_invisible_entry.config(validate='key', vcmd=self.vcmd)[m
[32m+[m				[32mself.state_manager.add_item_var.trace('w', self.on_add_item_entry_update)[m
[32m+[m				[32mself.ui.add_item_invisible_entry.config(textvariable=self.state_manager.add_item_var)[m
[32m+[m				[32mself.state_manager.binding_manager = self.ui.add_item_entry.bind("<FocusIn>", self.return_add_item_invisible_entry_focus)[m
[32m+[m				[32mself.ui.add_item_invisible_entry.focus_set()[m
 			case 2:[m
[31m-			add_item_invisible_entry.delete(0, tk.END)[m
[31m-			add_item_entry.unbind("<FocusIn>", state_manager.binding_manager)[m
[31m-			invf.enter_item_price([m
[31m-				state_manager, item_info_entered, add_item_label,[m
[31m-				add_item_yes_no, add_item_button, add_item_entry)[m
[31m-			on_add_item_enter()[m
[32m+[m				[32mself.ui.add_item_invisible_entry.delete(0, tk.END)[m
[32m+[m				[32mself.ui.add_item_entry.unbind("<FocusIn>", self.state_manager.binding_manager)[m
[32m+[m				[32mif invf.enter_item_price([m
[32m+[m					[32mself.state_manager, item_info_entered, self.ui.add_item_label,[m
[32m+[m					[32mself.ui.add_item_yes_no, self.ui.add_item_button, self.ui.add_item_entry):[m
[32m+[m					[32mself.on_add_item_enter()[m
 			case 3:[m
 				if invf.enter_item_taxable([m
[31m-				state_manager, root, add_item_yes_no, [m
[31m-				add_item_entry, add_item_button, add_item_label,[m
[31m-				add_item_listbox_frame):[m
[31m-				on_add_item_enter()[m
[32m+[m					[32mitem_info_entered, self.state_manager, root, self.ui.add_item_yes_no,[m
[32m+[m					[32mself.ui.add_item_entry, self.ui.add_item_button,[m[41m [m
[32m+[m					[32mself.ui.add_item_label, self.ui.add_item_listbox_frame):[m
[32m+[m					[32mself.on_add_item_enter()[m[41m		[m
 			case 4:[m
 				if invf.enter_item_category([m
[31m-				state_manager, add_item_frame, add_item_entry,[m
[31m-				add_item_label, add_item_listbox):[m
[31m-				on_add_item_enter()[m
[31m-			add_item_entry.config(validate='key', vcmd=vcmd)[m
[31m-			add_item_entry.focus_set()[m
[32m+[m					[32mself.state_manager, self.ui.add_item_frame, self.ui.add_item_entry,[m
[32m+[m					[32mself.ui.add_item_label, self.ui.add_item_listbox):[m
[32m+[m					[32mself.on_add_item_enter()[m
[32m+[m				[32mself.ui.add_item_entry.config(validate='key', vcmd=self.vcmd)[m
[32m+[m				[32mself.ui.add_item_entry.focus_set()[m
 			case 5:[m
[32m+[m				[32mself.ui.add_item_entry.config(validate='none')[m
 				if invf.enter_item_confirmation([m
[31m-				state_manager, item_info_entered, add_item_label,[m
[31m-				add_item_entry, add_item_button, item_info_confirmation,[m
[31m-				add_item_yes_no, back_button, root, reenter_frame):[m
[31m-				process_sale(None, state_manager.add_item_object.barcode)[m
[31m-				register_frame.tkraise()[m
[32m+[m					[32mself.state_manager, item_info_entered, self.ui.add_item_label,[m
[32m+[m					[32mself.ui.add_item_entry, self.ui.add_item_button, self.ui.item_info_confirmation,[m
[32m+[m					[32mself.ui.add_item_yes_no, self.ui.back_button, root, self.ui.reenter_frame):[m
[32m+[m					[32mself.process_sale(None, self.state_manager.add_item_object.barcode)[m
[32m+[m					[32mself.ui.register_frame.tkraise()[m
 			case _:[m
 [m
[31m-			add_item_entry.delete(0, tk.END)[m
[31m-			add_item_entry.insert(tk.END, "ERROR")[m
[32m+[m				[32mself.ui.add_item_entry.delete(0, tk.END)[m
[32m+[m				[32mself.ui.add_item_entry.insert(tk.END, "ERROR")[m
 [m
[31m-	print(f"New index: {state_manager.add_item_index}")[m
 		[m
[31m-def on_add_item_scrollbar_next(event=None):[m
[31m-	selected_index = add_item_listbox.curselection()[m
[31m-	selected_item = add_item_listbox.get(selected_index)[m
[31m-	add_item_entry.delete(0, tk.END)[m
[31m-	add_item_entry.insert(tk.END, selected_item)[m
[31m-	on_add_item_enter()[m
[32m+[m	[32mdef on_add_item_scrollbar_next(self, event=None):[m
[32m+[m		[32mselected_index = self.ui.add_item_listbox.curselection()[m
[32m+[m		[32mselected_item = self.ui.add_item_listbox.get(selected_index)[m
[32m+[m		[32mself.ui.add_item_entry.delete(0, tk.END)[m
[32m+[m		[32mself.ui.add_item_entry.insert(tk.END, selected_item)[m
[32m+[m		[32mself.on_add_item_enter()[m
 [m
[31m-def run_x(event=None):[m
[31m-	x_conn = sqlite3.connect("RegisterDatabase")[m
[31m-	x_cursor = x_conn.cursor()[m
[31m-	printer.textln(("-" * 42))[m
[31m-	printer.textln(("-" * 14) + " Daily Report " + ("-" * 14))[m
[31m-	printer.textln(("-" * 12) + " " + datetime.today().strftime('%Y-%m-%d') + " " + datetime.now().strftime("%H:%M") + " " + ("-" * 12))[m
[31m-	printer.textln("-" * 42)[m
[31m-	printer.ln(2)[m
[32m+[m	[32mdef run_x(self, event=None):[m
[32m+[m		[32mself.state_manager.cursor.execute('''SELECT "Transaction ID" FROM sales where date = ?''', (datetime.today().strftime('%Y-%m-%d'), ))[m
[32m+[m		[32mresults = self.state_manager.cursor.fetchall()[m
[32m+[m		[32mif not results:[m
[32m+[m			[32mreturn "break"[m
[32m+[m		[32mself.printer.textln(("-" * 42))[m
[32m+[m		[32mself.printer.textln(("-" * 14) + " Daily Report " + ("-" * 14))[m
[32m+[m		[32mself.printer.textln(("-" * 12) + " " + datetime.today().strftime('%Y-%m-%d') + " " + datetime.now().strftime("%H:%M") + " " + ("-" * 12))[m
[32m+[m		[32mself.printer.textln("-" * 42)[m
[32m+[m		[32mself.printer.ln(2)[m
 [m
 		for category in ("Cash Used", "CC Used", "Non-Tax", "Pre-Tax", "Tax"):[m
[31m-		x_cursor.execute('''SELECT SUM("%s") FROM SALES WHERE Date = ?''' % (category), (datetime.today().strftime('%Y-%m-%d'), ))[m
[31m-		results = x_cursor.fetchall()[m
[32m+[m			[32mself.state_manager.cursor.execute('''SELECT SUM("%s") FROM SALES WHERE Date = ?''' % (category), (datetime.today().strftime('%Y-%m-%d'), ))[m
[32m+[m			[32mresults = self.state_manager.cursor.fetchall()[m
 			sum_in_question = results[0][m
 			rounded = f"{sum_in_question[0]:.2f}"[m
[31m-		spaces = 42 - len(category) - len(rounded)[m
[32m+[m			[32mspaces = 29 - len(category) - len(rounded)[m
 			if category == "Cash Used" or category == "CC Used":[m
[31m-			spaces = 42 - len(category[:-5]) - len(rounded)[m
[31m-			printer.textln(f"{category[:-5]} Collected: " + (" " * spaces) + "$" + rounded)[m
[32m+[m				[32mspaces = 29 - len(category[:-5]) - len(rounded)[m
[32m+[m				[32mself.printer.textln(f"{category[:-5]} Collected: " + (" " * spaces) + "$" + rounded)[m
 			else:[m
[31m-			printer.textln(f"{category} Collected: " + (" " * spaces) + "$" + rounded)[m
[31m-	printer.cut[m
[31m-	[m
[31m-[m
[31m-def process_return(event=None):[m
[31m-	global state_manager[m
[31m-	state_manager.new_transaction()[m
[31m-	state_manager.trans.is_returning = True[m
[31m-	register_functions_buttons_frame.grid_forget()[m
[31m-	additional_register_functions_label.config(text="Please scan the item(s) to return\nWhen done, press continue")[m
[31m-	additional_register_functions_entry.grid(row=1, column=1, sticky='nsew')[m
[31m-	additional_register_functions_entry.focus_force()[m
[31m-	continue_button.grid(row=2, column=1, sticky='nsew')[m
[32m+[m				[32mself.printer.textln(f"{category} Collected: " + (" " * spaces) + "$" + rounded)[m
[32m+[m			[32mself.printer.ln(1)[m
[32m+[m[41m			[m
[32m+[m		[32mself.state_manager.cursor.execute('''SELECT times_pressed FROM no_sale WHERE date = ?''', (datetime.today().strftime('%Y-%m-%d'), ))[m
[32m+[m		[32mresults = self.state_manager.cursor.fetchall()[m
[32m+[m		[32mtimes_pressed = results[0][m
[32m+[m		[32mspaces = 28 - len((str(times_pressed)))[m
[32m+[m		[32mself.printer.textln("# Times No Sale: " + (" " * spaces) + str(times_pressed[0]))[m
[32m+[m		[32mself.printer.cut()[m
[32m+[m[41m		[m
[32m+[m
[32m+[m	[32mdef process_return(self, event=None):[m
[32m+[m[41m		[m
[32m+[m		[32mself.state_manager.new_transaction()[m
[32m+[m		[32mself.state_manager.trans.is_returning = True[m
[32m+[m		[32mself.ui.set_return_start()[m
[32m+[m
 		while True:[m
 			while True:[m
[31m-			root.wait_variable(state_manager.return_var)[m
[31m-			entry = state_manager.return_var.get()[m
[32m+[m				[32mroot.wait_variable(self.state_manager.return_var)[m
[32m+[m				[32mentry = self.state_manager.return_var.get()[m
 				if entry == "continue":[m
 					break[m
 				else:[m
[31m-				state_manager.trans.c.execute('''SELECT * FROM INVENTORY WHERE BARCODE=?''', (entry,))[m
[31m-				results = state_manager.trans.c.fetchall()[m
[32m+[m					[32mself.state_manager.trans.c.execute('''SELECT * FROM INVENTORY WHERE BARCODE=?''', (entry,))[m
[32m+[m					[32mresults = self.state_manager.trans.c.fetchall()[m
 					row = results[0][m
[31m-				state_manager.trans.sell_item(row[4])[m
[31m-				additional_register_functions_entry.delete(0, tk.END)[m
[31m-		additional_register_functions_label.config(text="Return the following item(s)?")[m
[31m-		additional_register_functions_text.grid(row=1, column=1, sticky='nsew')[m
[31m-		additional_register_functions_yes_no.grid(row=2, column=1, sticky='nsew')[m
[31m-		additional_register_functions_text.delete("1.0", "end")[m
[31m-		for i in range(len(state_manager.trans.quantity_sold_list)):[m
[31m-			additional_register_functions_text.insert("end", str(state_manager.trans.quantity_sold_list[i][0]) + " | QTY: " + str(state_manager.trans.quantity_sold_list[i][1]) + "\n")[m
[31m-		additional_register_functions_yes_no.grid(row=2, column=1, sticky='nsew')[m
[31m-		continue_button.grid_forget()[m
[31m-		root.wait_variable(state_manager.yes_no_var)[m
[31m-		button_pressed = state_manager.yes_no_var.get()[m
[32m+[m					[32mself.state_manager.trans.sell_item(row[4])[m
[32m+[m					[32mself.ui.additional_register_functions_entry.delete(0, tk.END)[m
[32m+[m
[32m+[m			[32mself.ui.set_return_confirmation()[m
[32m+[m
[32m+[m			[32mfor i in range(len(self.state_manager.trans.quantity_sold_list)):[m
[32m+[m				[32mself.ui.additional_register_functions_text.insert("end", str(self.state_manager.trans.quantity_sold_list[i][0]) + " | QTY: " + str(self.state_manager.trans.quantity_sold_list[i][1]) + "\n")[m
[32m+[m			[32mself.ui.additional_register_functions_yes_no.grid(row=2, column=1, sticky='nsew')[m
[32m+[m			[32mself.ui.continue_button.grid_forget()[m
[32m+[m			[32mroot.wait_variable(self.state_manager.yes_no_var)[m
[32m+[m			[32mbutton_pressed = self.state_manager.yes_no_var.get()[m
 			if button_pressed == "yes":[m
[31m-			for i in range(len(state_manager.trans.quantity_sold_list)):[m
[31m-				state_manager.trans.c.execute("UPDATE INVENTORY SET Quantity = Quantity + ? WHERE Barcode = ?", (int(state_manager.trans.quantity_sold_list[i][1]), state_manager.trans.quantity_sold_list[i][0]))[m
[32m+[m				[32mfor i in range(len(self.state_manager.trans.quantity_sold_list)):[m
[32m+[m					[32mself.state_manager.trans.c.execute("UPDATE INVENTORY SET Quantity = Quantity + ? WHERE Barcode = ?", (int(self.state_manager.trans.quantity_sold_list[i][1]), self.state_manager.trans.quantity_sold_list[i][0]))[m
 				break[m
 			elif button_pressed == "no":[m
[31m-			additional_register_functions_label.config(text="Please scan the item(s) to return\nWhen done, press continue")[m
[31m-			additional_register_functions_yes_no.grid_forget()[m
[31m-			continue_button.grid(row=2, column=1, sticky='nsew')[m
[31m-			additional_register_functions_text.grid_forget()[m
[31m-			additional_register_functions_text.delete("1.0", "end")[m
[31m-			additional_register_functions_entry.grid(row=1, column=1, sticky='nsew')[m
[31m-			state_manager.new_transaction()[m
[31m-	state_manager.trans.conn_inventory.commit()[m
[31m-	state_manager.trans.nontax *= -1[m
[31m-	state_manager.trans.pretax *= -1[m
[31m-	state_manager.trans.tax *= -1[m
[31m-	state_manager.trans.total *= -1[m
[31m-	state_manager.trans.complete_transaction()[m
[31m-	additional_register_functions_yes_no.grid_forget()[m
[31m-	register_functions_buttons_frame.grid(row=1, column=1, sticky='nsew')[m
[31m-	additional_register_functions_label.config(text="Select an Option")[m
[31m-	additional_register_functions_text.grid_forget()[m
[31m-	additional_register_functions_entry.grid_forget()[m
[31m-	return_conn = sqlite3.connect("RegisterDatabase")[m
[31m-	return_cursor = return_conn.cursor()[m
[31m-	return_cursor.execute('''SELECT * FROM SALES WHERE "Transaction ID" = (SELECT MAX("Transaction ID") FROM SALES)''')[m
[31m-	results = return_cursor.fetchall()[m
[32m+[m				[32mself.ui.set_return_restart()[m
[32m+[m				[32mself.state_manager.new_transaction()[m
[32m+[m		[32mself.state_manager.trans.conn_inventory.commit()[m
[32m+[m		[32mself.state_manager.trans.nontax *= -1[m
[32m+[m		[32mself.state_manager.trans.pretax *= -1[m
[32m+[m		[32mself.state_manager.trans.tax *= -1[m
[32m+[m		[32mself.state_manager.trans.total *= -1[m
[32m+[m		[32mself.state_manager.trans.complete_transaction()[m
[32m+[m		[32mself.ui.set_return_options()[m
[32m+[m		[32mself.state_manager.cursor.execute('''SELECT * FROM SALES WHERE "Transaction ID" = (SELECT MAX("Transaction ID") FROM SALES)''')[m
[32m+[m		[32mresults = self.state_manager.cursor.fetchall()[m
 		row = results[0][m
[31m-	return_cursor.execute('''SELECT * FROM SALEITEMS WHERE "Transaction ID" = ?''', (row[0], ))[m
[31m-	item_results = return_cursor.fetchall()[m
[31m-	print_receipt("return", row[0], item_results, row)[m
[31m-	enter_register_frame()[m
[32m+[m		[32mself.state_manager.cursor.execute('''SELECT * FROM SALEITEMS WHERE "Transaction ID" = ?''', (row[0], ))[m
[32m+[m		[32mitem_results = self.state_manager.cursor.fetchall()[m
[32m+[m		[32mself.print_receipt("return", row[0], item_results, row)[m
[32m+[m		[32mself.enter_register_frame()[m
 [m
 [m
[31m-def return_invisible_entry_focus(event):[m
[31m-    invisible_entry.focus_set()[m
[32m+[m	[32mdef return_invisible_entry_focus(self, event):[m
[32m+[m		[32mself.ui.invisible_entry.focus_set()[m
 		return "break"[m
 [m
[31m-def return_add_item_invisible_entry_focus(event):[m
[31m-	add_item_invisible_entry.focus_set()[m
[32m+[m	[32mdef return_add_item_invisible_entry_focus(self, event):[m
[32m+[m		[32mself.ui.add_item_invisible_entry.focus_set()[m
 		return "break"[m
 [m
[31m-def on_add_item_entry_update(*args):[m
[31m-[m
[31m-	global state_manager[m
[31m-[m
[31m-	number_pressed(None, add_item_invisible_entry, add_item_entry)[m
[31m-[m
[31m-# =============================[m
[31m-# Widgets for Mode select frame[m
[31m-# =============================[m
[31m-[m
[31m-mode_select_label = tk.Label(mode_select_frame, text="Please select a mode: ", font=("Arial", 50))[m
[31m-mode_select_label.grid(column=1, row=0, sticky='ew', pady=10)[m
[31m-register_mode_button = tk.Button(mode_select_frame, text="Enter Register Mode", font=("Arial", 50), command=lambda: enter_register_frame()).grid(column=1, row=1, sticky='ew', pady=10)[m
[31m-admin_mode_button = tk.Button(mode_select_frame, text="Enter Admin Mode", font=("Arial", 50), command=lambda: admin_frame.tkraise()).grid(column=1, row=2, sticky='ew', pady=10)[m
[31m-[m
[31m-# ===============================[m
[31m-# Widgets for Register Mode frame[m
[31m-# ===============================[m
[31m-[m
[31m-[m
[31m-#Entry box where numbers user is typing are being displayed [m
[31m-usr_entry = tk.Entry(register_frame, font=("Arial", 91), bg="black", fg="#68FF00", justify="right", width=15)[m
[31m-usr_entry.insert(tk.END, "$0.00")[m
[31m-usr_entry.grid(column=1, row=0, sticky='ew', padx=2)[m
[31m-usr_entry.bind("<FocusIn>", return_invisible_entry_focus)[m
[31m-[m
[31m-# Invisible entry where user input actually occurs. Allows user entry to be untampered so [m
[31m-# same entry box can be used for barcodes and numberic values alike[m
[31m-invisible_entry = tk.Entry(register_frame)[m
[31m-invisible_entry.place(x=-100, y=-100)[m
[31m-invisible_entry.bind("<Return>", process_sale)[m
[31m-for key in ("Home", "Up", "Prior", "Left","Begin", "Right", "End", "Down", "Next", "Insert"):[m
[31m-	invisible_entry.bind(f"<KeyRelease-KP_{key}>", number_pressed)[m
[31m-invisible_entry.bind("<KeyRelease-BackSpace>", clear)[m
[31m-invisible_entry.bind("<KeyRelease-KP_Enter>", lambda event: on_cash_cc(event, "cash"))[m
[31m-invisible_entry.bind("<KeyRelease-KP_Add>", lambda event: on_cash_cc(event, "cc"))[m
[31m-invisible_entry.bind("<KeyRelease-KP_Multiply>", enter_void_frame)[m
[31m-invisible_entry.bind("<KeyRelease-KP_Divide>", cancel_trans)[m
[31m-invisible_entry.bind("<KeyRelease-KP_Subtract>", no_sale)[m
[31m-[m
[31m-register_widgets_frame.grid(column=1, row=1, sticky='nsew')[m
[31m-[m
[31m-[m
[31m-[m
[31m-new_frame = tk.Frame(register_widgets_frame)[m
[31m-new_frame.grid_columnconfigure(0, weight=1)[m
[31m-new_frame.grid(column=0, row=0, sticky='nsew')[m
[31m-# Box where program outputs current running total[m
[31m-total_entry = tk.Entry(new_frame, font=("Arial", 35), width=9)[m
[31m-total_entry.insert(tk.END, "$0.00")[m
[31m-total_entry.grid(column = 0, row = 0, sticky='nw')[m
[31m-total_entry.bind("<FocusIn>", return_invisible_entry_focus)[m
[31m-[m
[31m-register_back_button = tk.Button(new_frame, text="Back", font=("Arial", 35), height=5, command = lambda: register_go_back())[m
[31m-register_back_button.grid(column = 0, row = 1, sticky='nw')[m
[31m-[m
[31m-#Log of what is being sold [m
[31m-sale_items = tk.Text(register_widgets_frame, width=29, font=("Arial", 35), padx=10)[m
[31m-sale_items.grid(column = 1, row = 0, sticky='e')[m
[31m-sale_items.bind("<FocusIn>", return_invisible_entry_focus)[m
[31m-[m
[31m-register_add_item_prompt_label=tk.Label(register_add_item_prompt_frame, text="Item not found\nAdd it?", font=("Arial", 50))[m
[31m-register_add_item_prompt_label.grid(row=0, column=1, sticky='ew')[m
[31m-[m
[31m-register_add_item_yes_no_frame=tk.Frame(register_add_item_prompt_frame)[m
[31m-register_add_item_yes_no_frame.grid_columnconfigure(0, weight=1)[m
[31m-register_add_item_yes_no_frame.grid_columnconfigure(1, weight=1)[m
[31m-register_add_item_yes_no_frame.grid(row=1, column=1, sticky='nsew')[m
[31m-[m
[31m-register_add_item_yes_button=tk.Button(register_add_item_yes_no_frame, text="Yes", font=("Arial", 90), command = lambda: state_manager.yes_no_var.set("yes"))[m
[31m-register_add_item_yes_button.grid(row=0, column=0, sticky='nsew')[m
[31m-[m
[31m-register_add_item_no_button=tk.Button(register_add_item_yes_no_frame, text="No", font=("Arial", 90), command = lambda: state_manager.yes_no_var.set("no"))[m
[31m-register_add_item_no_button.grid(row=0, column=1, sticky='nsew')[m
[31m-[m
[31m-# ============================[m
[31m-# Widgets for Admin Mode frame [m
[31m-# ============================[m
[31m-new_item_button = tk.Button(admin_frame, text = "Add New Item", font=("Arial", 50), height = 5, command = lambda: enter_add_item_frame()) [m
[31m-new_item_button.grid(column = 0, row = 1, sticky='s', padx = 5, pady = 5, ipadx=10, ipady=10)[m
[31m-[m
[31m-update_quantity_button = tk.Button(admin_frame, text = "Update\nInventory", font=("Arial", 50), height = 5, command = lambda: enter_update_inventory_frame())[m
[31m-update_quantity_button.grid(column=1, row=1, sticky='e', padx=5, pady=5, ipadx=10, ipady=10)[m
[31m-[m
[31m-[m
[31m-admin_back_button = tk.Button(admin_frame, text="Go Back", font=("Arial", 50), command=lambda: mode_select_frame.tkraise()).grid(column = 0, row = 0, sticky='nw')[m
[31m-[m
[31m-# ==========================[m
[31m-# Widgets for Add Item frame[m
[31m-# ==========================[m
[31m-[m
[31m-add_item_label = tk.Label(add_item_frame, text="Please enter the item's barcode:", font=("Arial", 50), width=27)[m
[31m-[m
[31m-add_item_button = tk.Button(add_item_frame, text="Next", font=("Arial", 50), command=lambda: on_add_item_enter())[m
[31m-[m
[31m-back_button = tk.Button(add_item_frame, text="Back", font=("Arial", 50), command=lambda: go_back())[m
[31m-[m
[31m-quit_button = tk.Button(add_item_frame, text="Quit", font=("Arial", 50), command = lambda: quit_button_handler())[m
[31m-[m
[31m-add_item_entry = tk.Entry(add_item_frame, font=("Arial", 50), width=15, justify="right")[m
[31m-add_item_entry.bind("<Return>", on_add_item_enter)[m
[31m-[m
[31m-add_item_invisible_entry = tk.Entry(add_item_frame, font=("Arial", 50), width=15, justify="right")[m
[31m-add_item_invisible_entry.place(x=-10, y=-10)[m
[31m-vcmd = (root.register(only_numbers), '%P')[m
[31m-add_item_invisible_entry.bind("<Return>", on_add_item_enter)[m
[31m-for key in ("Left", "Right", "Up", "Down"):[m
[31m-	add_item_invisible_entry.bind(f"<{key}>", wf.disable_arrow_keys)[m
[31m-[m
[31m-[m
[31m-item_info_confirmation = tk.Text(add_item_frame, font=("Arial", 40), width=6, height=3)[m
[31m-item_info_confirmation.tag_configure("justify_right", justify = "right")[m
[31m-yes_button = tk.Button(add_item_yes_no, text="Yes", font=("Arial", 150), command= lambda: state_manager.yes_no_var.set("yes"))[m
[31m-[m
[31m-no_button = tk.Button(add_item_yes_no, text="No", font=("Arial", 150), command=lambda: state_manager.yes_no_var.set("no"))[m
[31m-[m
[31m-yes_button.grid(column=0, row=0, sticky='nsew', padx=10)[m
[31m-no_button.grid(column=1, row=0, sticky='nsew', padx=10)[m
[31m-[m
[31m-# =========================[m
[31m-# Widgets for Listbox Frame[m
[31m-# =========================[m
[31m-[m
[31m-add_item_listbox = tk.Listbox(add_item_listbox_frame, width=20, height=5, font=("Arial", 50))[m
[31m-add_item_scrollbar = tk.Scrollbar(add_item_listbox_frame, orient=tk.VERTICAL, width=40)[m
[31m-[m
[31m-add_item_listbox.grid(row=1, column=1, sticky='nw')[m
[31m-add_item_scrollbar.grid(row=1, column=1, sticky='nse')[m
[31m-[m
[31m-add_item_scrollbar_label = tk.Label(add_item_listbox_frame, text="Please select category:", font=("Arial", 50))[m
[31m-add_item_scrollbar_label.grid(column=1, row=0, sticky='nsew')[m
[31m-[m
[31m-add_item_scrollbar_next = tk.Button(add_item_listbox_frame, text="Next", font=("Arial", 50), command=lambda: on_add_item_scrollbar_next())[m
[31m-add_item_scrollbar_next.grid(row=2, column=1, sticky='nsew')[m
[31m-[m
[31m-add_item_scrollbar_back = tk.Button(add_item_listbox_frame, text="Back", font=("Arial", 50), command=lambda: go_back())[m
[31m-add_item_scrollbar_back.grid(column=1, row=3, sticky='nsew')[m
[31m-[m
[31m-add_item_scrollbar_quit = tk.Button(add_item_listbox_frame, text="Quit", font=("Arial", 50), command=lambda: admin_frame.tkraise())[m
[31m-add_item_scrollbar_quit.grid(column=1, row=4, sticky='nsew')[m
[32m+[m	[32mdef on_add_item_entry_update(self, *args):[m
[32m+[m		[32mself.number_pressed(None, self.ui.add_item_invisible_entry, self.ui.add_item_entry)[m
 [m
[31m-for values in ("Camping", "Candy", "Cleaning", "Clothes", "Cookies/Chips", "Drinks", "Dry Goods", "Fishing", "Gifts", "Ice Cream", "Kitchenware", "Medicinal", "Paper Products", "Pool", "Propane", "Refrigerated", "RV", "Toiletries", "Toys"):[m
[31m-	add_item_listbox.insert(tk.END, values)[m
[32m+[m	[32m#def yes_no_handler(event=None):[m
[32m+[m	[32m#	print(event)[m
 [m
[31m-add_item_listbox.config(yscrollcommand= add_item_scrollbar.set)[m
[31m-add_item_scrollbar.config(command = add_item_listbox.yview)[m
[32m+[m	[32mdef on_yes_no(self, answer):[m
[32m+[m		[32mif self.state_manager.add_item_index == 3:[m
[32m+[m			[32mself.ui.add_item_entry.delete(0, tk.END)[m
[32m+[m			[32mself.ui.add_item_entry.insert(tk.END, answer)[m
[32m+[m			[32mself.on_add_item_enter()[m
[32m+[m		[32melif self.state_manager.add_item_index == 5:[m
[32m+[m			[32mself.state_manager.yes_no_var.set(answer)[m
 [m
[31m-# Buttons for options when user wants to correct one of their inputs[m
[31m-[m
[31m-add_name_button = tk.Button(reenter_frame, text="Name", font=("Arial", 75), command = lambda: reenter_button_pressed("name"))[m
[31m-add_name_button.grid(row=0, column=0, sticky='nsew')[m
[31m-[m
[31m-add_price_button = tk.Button(reenter_frame, text="Price", font=("Arial", 75), command = lambda: reenter_button_pressed("price"))[m
[31m-add_price_button.grid(row=0, column=1, sticky='nsew')[m
[31m-[m
[31m-add_barcode_button = tk.Button(reenter_frame, text="Barcode", font=("Arial", 75), command = lambda: reenter_button_pressed("barcode"))[m
[31m-add_barcode_button.grid(row=1, column=0, sticky='nsew')[m
[31m-[m
[31m-add_taxable_button = tk.Button(reenter_frame, text="Taxable", font=("Arial", 75), command = lambda: reenter_button_pressed("taxable"))[m
[31m-add_taxable_button.grid(row=1, column=1, sticky='nsew')[m
[31m-[m
[31m-add_quantity_button = tk.Button(reenter_frame, text="Quantity", font=("Arial", 75), command = lambda: reenter_button_pressed("quantity"))[m
[31m-add_quantity_button.grid(row=2, column=0, sticky='nsew')[m
[31m-[m
[31m-add_category_button = tk.Button(reenter_frame, text="Category", font=("Arial", 75), command = lambda: reenter_button_pressed("category"))[m
[31m-add_category_button.grid(row=2, column=1, sticky='nsew')[m
[31m-[m
[31m-# ==================================[m
[31m-# Widgets for Update Inventory Frame[m
[31m-# ==================================[m
[31m-[m
[31m-update_inventory_label=tk.Label(update_inventory_frame, text="What would you\nlike to update?", font=("Arial", 50))[m
[31m-update_inventory_label.grid(column=1, row=0, sticky='nsew')[m
[31m-[m
[31m-update_inventory_entry=tk.Entry(update_inventory_frame, font=("Arial", 75), width=18)[m
[31m-update_inventory_entry.bind("<Return>", get_update_barcode)[m
[31m-[m
[31m-update_buttons_frame.grid(column = 1, row=1, sticky='nsew')[m
[31m-[m
[31m-update_yes_button = tk.Button(update_inventory_yes_no, text="Yes", font=("Arial", 150), command= lambda: state_manager.yes_no_var.set("yes"))[m
[31m-[m
[31m-update_no_button = tk.Button(update_inventory_yes_no, text="No", font=("Arial", 150), command=lambda: state_manager.yes_no_var.set("no"))[m
[31m-[m
[31m-[m
[31m-update_yes_button.grid(column=0, row=0, sticky='nsew', padx=10)[m
[31m-update_no_button.grid(column=1, row=0, sticky='nsew', padx=10)[m
[31m-[m
[31m-update_name_button = tk.Button(update_buttons_frame, text="Name", font=("Arial", 75), command = lambda: update_inventory("Name", None))[m
[31m-update_name_button.grid(row=0, column=0, sticky='nsew')[m
[31m-[m
[31m-update_price_button = tk.Button(update_buttons_frame, text="Price", font=("Arial", 75), command = lambda: update_inventory("Price", None))[m
[31m-update_price_button.grid(row=0, column=1, sticky='nsew')[m
[31m-[m
[31m-update_barcode_button = tk.Button(update_buttons_frame, text="Barcode", font=("Arial", 75), command = lambda: update_inventory("Barcode", None))[m
[31m-update_barcode_button.grid(row=1, column=0, sticky='nsew')[m
[31m-[m
[31m-update_taxable_button = tk.Button(update_buttons_frame, text="Taxable", font=("Arial", 75), command = lambda: update_inventory("Taxable", None))[m
[31m-update_taxable_button.grid(row=1, column=1, sticky='nsew')[m
[31m-[m
[31m-update_quantity_button = tk.Button(update_buttons_frame, text="Quantity", font=("Arial", 75), command = lambda: update_inventory("Quantity", None))[m
[31m-update_quantity_button.grid(row=2, column=0, sticky='nsew')[m
[31m-[m
[31m-update_category_button = tk.Button(update_buttons_frame, text="Category", font=("Arial", 75), command = lambda: update_inventory("Category", None))[m
[31m-update_category_button.grid(row=2, column=1, sticky='nsew')[m
[31m-[m
[31m-# ==========================================[m
[31m-# Widgets for Additional Register Functions [m
[31m-# ==========================================[m
[31m-[m
[31m-additional_register_functions_label = tk.Label(additional_register_functions_frame, text="Select an Option", font=("Arial", 50))[m
[31m-additional_register_functions_label.grid(column = 1, row = 0, sticky='ew')[m
[31m-[m
[31m-register_functions_buttons_frame=tk.Frame(additional_register_functions_frame)[m
[31m-register_functions_buttons_frame.grid_columnconfigure(0, weight=1)[m
[31m-register_functions_buttons_frame.grid_columnconfigure(1, weight=1)[m
[31m-register_functions_buttons_frame.grid(row=1, column=1, sticky='nsew')[m
[31m-[m
[31m-last_button = tk.Button(register_functions_buttons_frame, text="Void Last\nTransaction", font=("Arial", 70), command = lambda:void_transaction("last"))[m
[31m-last_button.grid(row=0, column=0, sticky='nsew')[m
[31m-[m
[31m-number_button = tk.Button(register_functions_buttons_frame, text="Void by\nReference #", font=("Arial", 70), command = lambda:void_transaction("ref"))[m
[31m-number_button.grid(row=0, column=1, sticky='nsew')[m
[31m-[m
[31m-print_receipt_button = tk.Button(register_functions_buttons_frame, text="Print a Receipt", font=("Arial", 70))[m
[31m-print_receipt_button.grid(row=1, column=0, sticky='nsew')[m
[31m-[m
[31m-make_return_button = tk.Button(register_functions_buttons_frame, text="Process Return", font=("Arial", 70), command = lambda:process_return())[m
[31m-make_return_button.grid(row=1, column=1, sticky='nsew')[m
[31m-[m
[31m-run_x_button = tk.Button(register_functions_buttons_frame, text="Run X", font=("Arial", 50), command = lambda:run_x())[m
[31m-run_x_button.grid(row=2, column=0, sticky='nsew')[m
[31m-[m
[31m-continue_button = tk.Button(additional_register_functions_frame, text="Continue", font=("Arial", 50), command= lambda: state_manager.reference_number_var.set("continue"))[m
[31m-[m
[31m-additional_register_functions_entry = tk.Entry(additional_register_functions_frame, font=("Arial", 50), justify="right")[m
[31m-additional_register_functions_entry.bind("<Return>", on_additional_register_functions_entry)[m
[31m-[m
[31m-additional_register_functions_text = tk.Text(additional_register_functions_frame, width=30, height=3, font=("Arial", 40))[m
[31m-[m
[31m-[m
[31m-additional_register_functions_yes_button = tk.Button(additional_register_functions_yes_no, text="Yes", font=("Arial", 150), command= lambda: state_manager.yes_no_var.set("yes"))[m
[31m-additional_register_functions_no_button = tk.Button(additional_register_functions_yes_no, text="No", font=("Arial", 150), command=lambda: state_manager.yes_no_var.set("no"))[m
[31m-[m
[31m-[m
[31m-additional_register_functions_yes_button.grid(column=0, row=0, sticky='nsew', padx=10)[m
[31m-additional_register_functions_yes_button.grid(column=1, row=0, sticky='nsew', padx=10)[m
[31m-[m
[31m-mode_select_frame.tkraise()[m
[32m+[m[32mif __name__ == "__main__":[m
[32m+[m	[32m#Declaration of root window[m
[32m+[m	[32mroot = tk.Tk()[m
[32m+[m	[32mroot.title("TBC REGISTER")[m
[32m+[m	[32mroot.geometry("1024x600")[m
[32m+[m	[32mroot.tk.call('tk', 'scaling', 1)[m
[32m+[m	[32mroot.grid_columnconfigure(0, weight=1)[m
[32m+[m	[32mroot.grid_rowconfigure(0, weight=1)[m
[32m+[m	[32m#root.attributes("-fullscreen", True)[m
[32m+[m	[32mregister = Register(root)[m
[32m+[m	[32mregister.state_manager.cursor.execute([m
[32m+[m		[32m"INSERT INTO no_sale (date, times_pressed) VALUES (?, ?) ON CONFLICT (date)" \[m
[32m+[m		[32m"DO NOTHING",[m
[32m+[m		[32m(datetime.today().strftime('%Y-%m-%d'), 0))[m
[32m+[m	[32mregister.state_manager.conn.commit()[m
[32m+[m	[32mpygame.mixer.init()[m
[32m+[m	[32mregister.ui.mode_select_frame.tkraise()[m
 	root.mainloop()[m
 [m
 [m
[1mdiff --git a/src/RegisterDatabase b/src/RegisterDatabase[m
[1mnew file mode 100755[m
[1mindex 0000000..e8144f7[m
Binary files /dev/null and b/src/RegisterDatabase differ
[1mdiff --git a/src/config.py b/src/config.py[m
[1mnew file mode 100755[m
[1mindex 0000000..2a7e9c5[m
[1m--- /dev/null[m
[1m+++ b/src/config.py[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32mclass Config:[m
[32m+[m
[32m+[m[32m    def __init__(self):[m
[32m+[m[32m        self.printing_width = 42[m
\ No newline at end of file[m
[1mdiff --git a/src/create_testing_database.py b/src/create_testing_database.py[m
[1mnew file mode 100755[m
[1mindex 0000000..a43a803[m
[1m--- /dev/null[m
[1m+++ b/src/create_testing_database.py[m
[36m@@ -0,0 +1,22 @@[m
[32m+[m[32mimport sqlite3[m
[32m+[m[32mimport os[m
[32m+[m
[32m+[m[32mdatabase_path = "/tmp/RegisterDatabase"[m
[32m+[m
[32m+[m[32mif os.path.exists(database_path):[m
[32m+[m[32m    os.remove(database_path)[m
[32m+[m
[32m+[m[32mconn = sqlite3.connect('/tmp/RegisterDatabase')[m
[32m+[m[32mcursor = conn.cursor()[m
[32m+[m
[32m+[m[32mwith open('database_commands.txt', 'r') as fp:[m
[32m+[m[32m    text = fp.read().split("\n")[m
[32m+[m
[32m+[m[32m    for command in text:[m
[32m+[m[32m        try:[m
[32m+[m[32m            cursor.execute(command)[m
[32m+[m[32m        except sqlite3.Error:[m
[32m+[m[32m            print(sqlite3.Error)[m
[32m+[m
[32m+[m[32mconn.commit()[m
[32m+[m[32mconn.close()[m
[1mdiff --git a/src/database_commands.txt b/src/database_commands.txt[m
[1mnew file mode 100755[m
[1mindex 0000000..24b50c4[m
[1m--- /dev/null[m
[1m+++ b/src/database_commands.txt[m
[36m@@ -0,0 +1,16 @@[m
[32m+[m[32mCREATE TABLE Inventory(item_id INTEGER PRIMARY KEY AUTOINCREMENT, Name TEXT NOT NULL, Price REAL NOT NULL, Taxable BOOLEAN, Barcode TEXT, Quantity INTEGER, Category TEXT)[m
[32m+[m[32mCREATE TABLE sales("Transaction ID" INTEGER PRIMARY KEY, "Non-Tax" REAL,"Pre-Tax" REAL, Tax REAL, Total REAL, "# Items Sold" INTEGER, Date TEXT, Time TEXT, "Cash Used" REAL, "CC Used" REAL, Voided BOOLEAN)[m
[32m+[m[32mCREATE TABLE saleitems("Transaction ID" INTEGER, Name TEXT, Price REAL, Tax BOOLEAN, Barcode TEXT, Quantity INTEGER)[m
[32m+[m[32mCREATE TABLE no_sale(date TEXT UNIQUE, times_pressed INT)[m
[32m+[m[32mINSERT INTO Inventory VALUES(NULL, 'Test', 1.23, 0, 'Test', 100, 'Camping')[m
[32m+[m[32mINSERT INTO Inventory VALUES(NULL, 'Test1', 1.23, 1, 'Test1', 100, 'Camping')[m
[32m+[m[32mINSERT INTO Inventory VALUES(NULL, 'Test2', 1.23, 0, 'Test2', 100, 'Camping')[m
[32m+[m[32mINSERT INTO Inventory VALUES(NULL, 'Test3', 1.23, 1, 'Test3', 100, 'Camping')[m
[32m+[m[32mINSERT INTO Inventory VALUES(NULL, 'Test4', 1.23, 0, 'Test4', 100, 'Camping')[m
[32m+[m[32mINSERT INTO Inventory VALUES(NULL, 'Test5', 1.23, 1, 'Test5', 100, 'Camping')[m
[32m+[m[32mINSERT INTO Inventory VALUES(NULL, 'Test6', 1.23, 0, 'Test6', 100, 'Camping')[m
[32m+[m[32mINSERT INTO Inventory VALUES(NULL, 'Test7', 1.23, 1, 'Test7', 100, 'Camping')[m
[32m+[m[32mINSERT INTO Inventory VALUES(NULL, 'Test8', 1.23, 0, 'Test8', 100, 'Camping')[m
[32m+[m[32mINSERT INTO Inventory VALUES(NULL, 'Test9', 1.23, 1, 'Test9', 100, 'Camping')[m
[32m+[m
[32m+[m
[1mdiff --git a/enteritem.py b/src/enteritem.py[m
[1mold mode 100644[m
[1mnew mode 100755[m
[1msimilarity index 30%[m
[1mrename from enteritem.py[m
[1mrename to src/enteritem.py[m
[1mindex 70d0c39..eb2aba9[m
[1m--- a/enteritem.py[m
[1m+++ b/src/enteritem.py[m
[36m@@ -2,7 +2,7 @@[m [mimport sqlite3[m
 [m
 class AddToInventory:[m
 	[m
[31m-	def __init__(self):[m
[32m+[m	[32mdef __init__(self, db_conn, db_cursor):[m
 		self.name = ""[m
 		self.price = 0.0[m
 		self.barcode = 0[m
[36m@@ -10,20 +10,17 @@[m [mclass AddToInventory:[m
 		self.taxable = 0[m
 		self.quantity = 0[m
 		self.category = ""[m
[31m-		self.conn = sqlite3.connect('RegisterDatabase')[m
[31m-		self.c = self.conn.cursor()[m
[31m-		[m
[31m-	def __del__(self):[m
[31m-		self.conn.close()[m
[32m+[m		[32mself.db_conn = db_conn[m
[32m+[m		[32mself.db_cursor = db_cursor[m
 		[m
 [m
 	def commit_item(self):[m
[31m-		self.c.execute("INSERT INTO INVENTORY VALUES (NULL, ?, ?, ?, ?, ?, ?)", (self.name, self.price, self.taxable, self.barcode, self.quantity, self.category))[m
[31m-		self.conn.commit()		[m
[32m+[m		[32mself.db_cursor.execute("INSERT INTO INVENTORY VALUES (NULL, ?, ?, ?, ?, ?, ?)", (self.name, self.price, self.taxable, self.barcode, self.quantity, self.category))[m
[32m+[m		[32mself.db_conn.commit()[m[41m		[m
 [m
 	def update_item(self, old_barcode):[m
[31m-		self.c.execute("UPDATE INVENTORY SET Name=?, Price=?, Taxable=?, Barcode=?, Quantity=?, Category=? WHERE Barcode=?", (self.name, self.price, self.taxable, self.barcode, self.quantity, self.category, old_barcode))[m
[31m-		self.conn.commit()[m
[32m+[m		[32mself.db_cursor.execute("UPDATE INVENTORY SET Name=?, Price=?, Taxable=?, Barcode=?, Quantity=?, Category=? WHERE Barcode=?", (self.name, self.price, self.taxable, self.barcode, self.quantity, self.category, old_barcode))[m
[32m+[m		[32mself.db_conn.commit()[m
 		[m
 [m
 [m
[1mdiff --git a/inventory_functions.py b/src/inventory_functions.py[m
[1mold mode 100644[m
[1mnew mode 100755[m
[1msimilarity index 90%[m
[1mrename from inventory_functions.py[m
[1mrename to src/inventory_functions.py[m
[1mindex a948ad5..864a0a9[m
[1m--- a/inventory_functions.py[m
[1m+++ b/src/inventory_functions.py[m
[36m@@ -6,8 +6,8 @@[m [mdef check_item_exists(state_manager: StateManager, barcode: str, add_item_label:[m
     """This function is the pre-requisite to adding an item. We want to[m
     make sure that the item does not already exist."""[m
 [m
[31m-    state_manager.add_item_object.c.execute("SELECT * FROM INVENTORY WHERE BARCODE=?", (barcode,))[m
[31m-    results = state_manager.add_item_object.c.fetchall()[m
[32m+[m[32m    state_manager.cursor.execute("SELECT * FROM INVENTORY WHERE BARCODE=?", (barcode,))[m
[32m+[m[32m    results = state_manager.cursor.fetchall()[m
     if results: [m
         found_item_info = results[0][m
         state_manager.add_item_object.name = found_item_info[1][m
[36m@@ -57,41 +57,41 @@[m [mdef enter_item_price([m
     """Set the add item object's price. If we are not re-entering, change[m
     the necessary widgets to ask user whether the item is taxable."""[m
 [m
[31m-    state_manager.add_item_object.price = float(price[1:])[m
[32m+[m[32m    state_manager.add_item_object.price = round(float(price[1:]), 2)[m
[32m+[m[32m    print(state_manager.add_item_object.price)[m
     if not state_manager.reentering:[m
         add_item_label.config(text="Is the item Taxable?")[m
         add_item_yes_no.grid(column=1, row=2, sticky='nsew')[m
         add_item_button.grid_forget()[m
         add_item_entry.grid_forget()[m
         state_manager.add_item_index += 1[m
[31m-        return True[m
     elif state_manager.reentering:[m
         state_manager.add_item_index = 5[m
         return True[m
 [m
 def enter_item_taxable([m
[31m-        state_manager: StateManager, root: tk.Tk,[m
[32m+[m[32m        yes_no: str, state_manager: StateManager, root: tk.Tk,[m
         add_item_yes_no: tk.Frame, add_item_entry: tk.Entry,[m
         add_item_button: tk.Button, add_item_label: tk.Label,[m
         add_item_listbox_frame: tk.Frame) -> bool:[m
     """Waits for the user to click yes/no for whether the item is taxable. [m
     Set the add_item_object variable accordingly, and clean up widgets."""[m
 [m
[31m-    root.wait_variable(state_manager.yes_no_var)[m
[31m-    yes_no_answer = state_manager.yes_no_var.get()[m
[31m-    if yes_no_answer == "break":[m
[31m-        return[m
[31m-    elif yes_no_answer == "yes":[m
[31m-        state_manager.add_item_object.taxable = 1[m
[32m+[m[32m    #root.wait_variable(state_manager.yes_no_var)[m
[32m+[m[32m    #yes_no_answer = state_manager.yes_no_var.get()[m
[32m+[m[32m    if yes_no == "yes":[m
[32m+[m[32m        state_manager.add_item_object.taxable = "1"[m
     else:[m
[31m-        state_manager.add_item_object.taxable = 0[m
[32m+[m[32m        state_manager.add_item_object.taxable = "0"[m
     if not state_manager.reentering:[m
[32m+[m[32m        print(state_manager.yes_no_var)[m
         add_item_yes_no.grid_forget()[m
         add_item_entry.grid(column=1, row=1, sticky='ew', pady=15)[m
         add_item_button.grid(column=1, row=2, sticky='ew')[m
         add_item_label.config(text="Please enter the category:")[m
         add_item_listbox_frame.tkraise()[m
         state_manager.add_item_index+=1[m
[32m+[m[32m        return False[m
     elif state_manager.reentering:[m
         state_manager.add_item_index=5[m
         return True[m
[36m@@ -226,7 +226,7 @@[m [mdef print_confirmation_info(state_manager: StateManager, item_info_confirmation:[m
 [m
     item_info_confirmation.delete("1.0", "end")[m
     item_info_confirmation.insert(tk.END, "Name: " + state_manager.add_item_object.name)[m
[31m-    item_info_confirmation.insert(tk.END, "\nPrice : $" + str(state_manager.add_item_object.price))[m
[32m+[m[32m    item_info_confirmation.insert(tk.END, "\nPrice : $" + f'{state_manager.add_item_object.price:.2f}')[m
     if state_manager.add_item_object.taxable == "1":[m
         item_info_confirmation.insert(tk.END, "Tax?: Yes", "justify_right")[m
     else:[m
[1mdiff --git a/makeTransaction.py b/src/makeTransaction.py[m
[1mold mode 100644[m
[1mnew mode 100755[m
[1msimilarity index 57%[m
[1mrename from makeTransaction.py[m
[1mrename to src/makeTransaction.py[m
[1mindex 85e4dd5..30338d8[m
[1m--- a/makeTransaction.py[m
[1m+++ b/src/makeTransaction.py[m
[36m@@ -4,49 +4,42 @@[m [mfrom datetime import datetime[m
 date = datetime.today().strftime('%Y-%m-%d')[m
 [m
 class Transaction:[m
[31m-	def __init__(self, sql_db="RegisterDatabase"):[m
[31m-		self.conn_inventory = sqlite3.connect(sql_db)[m
[31m-		self.c = self.conn_inventory.cursor()[m
[31m-		self.nontax = 0[m
[31m-		self.pretax = 0[m
[31m-		self.tax = 0[m
[31m-		self.total = 0[m
[31m-		self.items_sold = 0[m
[31m-		self.cash_used = 0[m
[31m-		self.cc_used = 0[m
[32m+[m	[32mdef __init__(self, db_conn, db_cursor):[m
[32m+[m		[32mself.db_conn = db_conn[m
[32m+[m		[32mself.db_cursor = db_cursor[m
[32m+[m		[32mself.nontax = self.pretax = self.tax = self.total = 0[m
[32m+[m		[32mself.items_sold = self.cash_used = self.cc_used = 0[m
[32m+[m		[32mself.cash_tendered = self.cc_tendered = 0[m
 		self.items_list = [][m
 		self.quantity_sold_list = [][m
 		self.is_returning = False[m
 		[m
[31m-	def __del__(self):[m
[31m-		self.conn_inventory.commit()[m
[31m-		self.conn_inventory.close()[m
 		[m
 	def complete_transaction(self):[m
 		global date[m
[31m-		self.c.execute("INSERT INTO SALES VALUES (NULL, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)", (self.nontax, self.pretax, self.tax, self.total, self.items_sold, date, datetime.now().strftime("%H:%M"), self.cash_used, self.cc_used, 0))[m
[31m-		self.c.execute('''SELECT MAX("Transaction ID") FROM Sales''')[m
[31m-		results = self.c.fetchall()[m
[32m+[m		[32mself.db_cursor.execute("INSERT INTO SALES VALUES (NULL, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)", (self.nontax, self.pretax, self.tax, self.total, self.items_sold, date, datetime.now().strftime("%H:%M"), self.cash_used, self.cc_used, 0))[m
[32m+[m		[32mself.db_cursor.execute('''SELECT MAX("Transaction ID") FROM Sales''')[m
[32m+[m		[32mresults = self.db_cursor.fetchall()[m
 		row = results[0][m
 		for i in range(len(self.items_list)):[m
[31m-			self.c.execute("INSERT OR IGNORE INTO SALEITEMS VALUES(?, ?, ?, ?, ?, ?)", (row[0], self.items_list[i][0], self.items_list[i][1], self.items_list[i][2], self.items_list[i][3], self.quantity_sold_list[i][1]))[m
[32m+[m			[32mself.db_cursor.execute("INSERT OR IGNORE INTO SALEITEMS VALUES(?, ?, ?, ?, ?, ?)", (row[0], self.items_list[i][0], self.items_list[i][1], self.items_list[i][2], self.items_list[i][3], self.quantity_sold_list[i][1]))[m
 			if not self.is_returning:[m
[31m-				self.c.execute("UPDATE INVENTORY SET Quantity = Quantity - ? WHERE barcode = ?", (self.quantity_sold_list[i][1], self.quantity_sold_list[i][0]))[m
[31m-		self.conn_inventory.commit()[m
[32m+[m				[32mself.db_cursor.execute("UPDATE INVENTORY SET Quantity = Quantity - ? WHERE barcode = ?", (self.quantity_sold_list[i][1], self.quantity_sold_list[i][0]))[m
[32m+[m		[32mself.db_conn.commit()[m
 		[m
 			[m
 [m
 	def sell_item(self, entered_barcode):[m
 	[m
[31m-		self.c.execute("SELECT * FROM INVENTORY WHERE BARCODE = ?", (entered_barcode,))[m
[31m-		results = self.c.fetchall()[m
[32m+[m		[32mself.db_cursor.execute("SELECT * FROM INVENTORY WHERE BARCODE = ?", (entered_barcode,))[m
[32m+[m		[32mresults = self.db_cursor.fetchall()[m
 		if not results:[m
 			return "item_not_found", None, None, None[m
 		row = results[0][m
 		#Row[1] = item_name, Row[2] = item_price, Row[3] = taxable, Row[5] = quantity[m
 		item_info = [row[1], row[2], row[3], entered_barcode, row[5]][m
 		if item_info[2] == 1:[m
[31m-			self.tax += item_info[1] * 0.06625[m
[32m+[m			[32mself.tax += round(item_info[1] * 0.06625, 2)[m
 			self.pretax += item_info[1][m
 		else:[m
 			self.nontax += item_info[1][m
[1mdiff --git a/short-beep.mp3 b/src/short-beep.mp3[m
[1mold mode 100644[m
[1mnew mode 100755[m
[1msimilarity index 100%[m
[1mrename from short-beep.mp3[m
[1mrename to src/short-beep.mp3[m
[1mdiff --git a/stateManager.py b/src/stateManager.py[m
[1mold mode 100644[m
[1mnew mode 100755[m
[1msimilarity index 66%[m
[1mrename from stateManager.py[m
[1mrename to src/stateManager.py[m
[1mindex cbe5740..3054b51[m
[1m--- a/stateManager.py[m
[1m+++ b/src/stateManager.py[m
[36m@@ -1,27 +1,30 @@[m
 from makeTransaction import * [m
 from enteritem import *[m
 import tkinter as tk[m
[32m+[m[32mimport sqlite3[m
 [m
 class StateManager:[m
     def __init__(self, root_window):[m
         self.add_item_index = 0[m
         self.reentering = self.coming_from_register = self.updating_existing_item = self.reentering_quantity = False [m
[31m-        self.trans = Transaction()[m
[31m-        self.add_item_object = AddToInventory()[m
         self.yes_no_var = tk.StringVar(root_window)[m
         self.reference_number_var = tk.StringVar(root_window)[m
         self.update_inventory_var = tk.StringVar(root_window)[m
         self.return_var = tk.StringVar(root_window)[m
         self.add_item_var = tk.StringVar(root_window)[m
         self.binding_manager = None[m
[32m+[m[32m        self.conn = sqlite3.connect("/tmp/RegisterDatabase")[m
[32m+[m[32m        self.cursor = self.conn.cursor()[m
[32m+[m[32m        self.trans = Transaction(self.conn, self.cursor)[m
[32m+[m[32m        self.add_item_object = AddToInventory(self.conn, self.cursor)[m
 [m
     def new_transaction(self):[m
         del self.trans[m
[31m-        self.trans = Transaction()[m
[32m+[m[32m        self.trans = Transaction(self.conn, self.cursor)[m
 [m
     def new_add_item_object(self):[m
         del self.add_item_object[m
[31m-        self.add_item_object = AddToInventory()[m
[32m+[m[32m        self.add_item_object = AddToInventory(self.conn, self.cursor)[m
 [m
 [m
    [m
[1mdiff --git a/src/test_add_items_functions.py b/src/test_add_items_functions.py[m
[1mnew file mode 100755[m
[1mindex 0000000..1d88451[m
[1m--- /dev/null[m
[1m+++ b/src/test_add_items_functions.py[m
[36m@@ -0,0 +1,34 @@[m
[32m+[m[32mfrom Register import *[m[41m[m
[32m+[m[32mimport tkinter as tk[m[41m[m
[32m+[m[32mimport pytest[m[41m[m
[32m+[m[32mimport sqlite3[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[41m[m
[32m+[m[32m@pytest.fixture(scope="function")[m[41m[m
[32m+[m[32mdef register_instance():[m[41m[m
[32m+[m[32m    root = tk.Tk()[m[41m[m
[32m+[m[32m    register = Register(root)[m[41m[m
[32m+[m[32m    root.withdraw()[m[41m[m
[32m+[m[32m    root.update()[m[41m[m
[32m+[m[32m    yield register[m[41m[m
[32m+[m[32m    root.destroy()[m[41m[m
[32m+[m[41m[m
[32m+[m[32mconn = sqlite3.connect("/tmp/RegisterDatabase")[m[41m[m
[32m+[m[32mc = conn.cursor()[m[41m[m
[32m+[m[41m[m
[32m+[m[32mdef test_enter_item(register_instance):[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    """Test that the basic add item process functions as expected"""[m[41m[m
[32m+[m[32m    global c[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    register_instance.enter_add_item_frame()[m[41m[m
[32m+[m[32m    register_instance.ui.add_item_entry.insert(tk.END, "Test Item")[m[41m[m
[32m+[m[32m    register_instance.on_add_item_enter()[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    assert register_instance.state_manager.add_item_object.barcode == "Test Item"[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    register_instance.ui.add_item_entry.insert(tk.END, "Test Item")[m[41m[m
[32m+[m[32m    register_instance.on_add_item_enter()[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    assert register_instance.state_manager.add_item_object.name == "Test Item"[m
\ No newline at end of file[m
[1mdiff --git a/src/test_register_functions.py b/src/test_register_functions.py[m
[1mnew file mode 100755[m
[1mindex 0000000..3420860[m
[1m--- /dev/null[m
[1m+++ b/src/test_register_functions.py[m
[36m@@ -0,0 +1,156 @@[m
[32m+[m[32mfrom Register import *[m
[32m+[m[32mimport tkinter as tk[m
[32m+[m[32mimport pytest[m
[32m+[m[32mimport sqlite3[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m@pytest.fixture(scope="function")[m
[32m+[m[32mdef register_instance():[m
[32m+[m[32m    root = tk.Tk()[m
[32m+[m[32m    register = Register(root)[m
[32m+[m[32m    root.withdraw()[m
[32m+[m[32m    root.update()[m
[32m+[m[32m    yield register[m
[32m+[m[32m    root.destroy()[m
[32m+[m
[32m+[m[32mconn = sqlite3.connect("/tmp/RegisterDatabase")[m
[32m+[m[32mc = conn.cursor()[m
[32m+[m
[32m+[m[32mdef test_basic_sale_cash(register_instance):[m
[32m+[m[32m    """Sale of one item, no specified cash amount"""[m
[32m+[m
[32m+[m[32m    global c[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "Test")[m
[32m+[m[32m    register_instance.process_sale()[m
[32m+[m[32m    register_instance.on_cash()[m
[32m+[m
[32m+[m
[32m+[m[32m    c.execute('SELECT "Non-Tax", "Cash Used" FROM sales WHERE "Transaction ID" = (SELECT MAX("Transaction ID") FROM sales)')[m
[32m+[m[32m    results = c.fetchall()[m
[32m+[m[32m    row = results[0][m
[32m+[m[32m    assert row[0] == 1.23[m
[32m+[m[32m    assert row[1] == 1.23[m
[32m+[m
[32m+[m[32mdef test_basic_sale_cc(register_instance):[m
[32m+[m[32m    """Sale of one item, no specified cc amount"""[m
[32m+[m
[32m+[m[32m    global c[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "Test")[m
[32m+[m[32m    register_instance.process_sale()[m
[32m+[m[32m    register_instance.on_cc()[m
[32m+[m
[32m+[m[32m    c.execute('SELECT "Non-Tax", "CC Used" FROM sales WHERE "Transaction ID" = (SELECT MAX("Transaction ID") FROM sales)')[m
[32m+[m[32m    results = c.fetchall()[m
[32m+[m[32m    row = results[0][m
[32m+[m[32m    assert row[0] == 1.23[m
[32m+[m[32m    assert row[1] == 1.23[m
[32m+[m
[32m+[m[32mdef test_sale_cash_cc(register_instance):[m
[32m+[m[32m    """Sale of one item. $1.00 is paid in cash, and the rest CC"""[m
[32m+[m
[32m+[m[32m    global c[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "Test")[m
[32m+[m[32m    register_instance.process_sale()[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "100")[m
[32m+[m[32m    register_instance.on_cash()[m
[32m+[m[32m    register_instance.on_cc()[m
[32m+[m
[32m+[m[32m    c.execute('SELECT "Non-Tax", "Cash Used", "CC Used" FROM sales WHERE "Transaction ID" = (SELECT MAX("Transaction ID") FROM sales)')[m
[32m+[m[32m    results = c.fetchall()[m
[32m+[m[32m    row = results[0][m
[32m+[m[32m    assert row[0] == 1.23[m
[32m+[m[32m    assert row[1] == 1.00[m
[32m+[m[32m    assert row[2] == 0.23[m
[32m+[m
[32m+[m[32mdef test_sale_cc_cash(register_instance):[m
[32m+[m[32m    """Sale of one item. $1.00 is paid in CC, and the rest Cash"""[m
[32m+[m[32m    global c[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "Test")[m
[32m+[m[32m    register_instance.process_sale()[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "100+")[m
[32m+[m[32m    register_instance.on_cc()[m
[32m+[m[32m    register_instance.on_cash()[m
[32m+[m
[32m+[m[32m    c.execute('SELECT "Non-Tax", "Cash Used", "CC Used" FROM sales WHERE "Transaction ID" = (SELECT MAX("Transaction ID") FROM sales)')[m
[32m+[m[32m    results = c.fetchall()[m
[32m+[m[32m    row = results[0][m
[32m+[m[32m    assert row[0] == 1.23[m
[32m+[m[32m    assert row[1] == 0.23[m
[32m+[m[32m    assert row[2] == 1.00[m
[32m+[m
[32m+[m[32mdef test_cc_invalid(register_instance):[m
[32m+[m[32m    """Sale of one item. The user enters an amount to be paid in CC that[m[41m [m
[32m+[m[32m    exceeds the balance. Register should pause the sale and print to the[m
[32m+[m[32m    user that this is invalid. Sales ending in a CC amount should not[m
[32m+[m[32m    result in any change needing to be given."""[m
[32m+[m
[32m+[m[32m    global c[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "Test")[m
[32m+[m[32m    register_instance.process_sale()[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "124+")[m
[32m+[m[32m    register_instance.on_cc()[m
[32m+[m
[32m+[m[32m    result = register_instance.ui.total_entry.get()[m
[32m+[m[32m    assert result == "$0.00ERR: CC"[m
[32m+[m
[32m+[m[32mdef test_quantity_decrement_single(register_instance):[m
[32m+[m
[32m+[m[32m    global c[m
[32m+[m
[32m+[m[32m    c.execute('SELECT Quantity FROM inventory where Barcode = ?', ("Test", ))[m
[32m+[m[32m    results = c.fetchall()[m
[32m+[m[32m    row = results[0][m
[32m+[m
[32m+[m[32m    quantity = row[0][m
[32m+[m[41m    [m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "Test")[m
[32m+[m[32m    register_instance.process_sale()[m
[32m+[m[32m    register_instance.on_cash()[m
[32m+[m
[32m+[m[32m    c.execute('SELECT Quantity FROM inventory where Barcode = ?', ("Test", ))[m
[32m+[m[32m    results = c.fetchall()[m
[32m+[m[32m    row = results[0][m
[32m+[m
[32m+[m[32m    new_quantity = row[0][m
[32m+[m
[32m+[m[32m    assert new_quantity == (quantity - 1)[m
[32m+[m
[32m+[m[32mdef test_quantity_decrement_double(register_instance):[m
[32m+[m
[32m+[m[32m    global c[m
[32m+[m
[32m+[m[32m    c.execute('SELECT Quantity FROM inventory where Barcode = ?', ("Test", ))[m
[32m+[m[32m    results = c.fetchall()[m
[32m+[m[32m    row = results[0][m
[32m+[m
[32m+[m[32m    item_one_starting_quantity = row[0][m
[32m+[m
[32m+[m[32m    c.execute('SELECT Quantity FROM inventory where Barcode = ?', ("Test1", ))[m
[32m+[m[32m    results = c.fetchall()[m
[32m+[m[32m    row = results[0][m
[32m+[m
[32m+[m[32m    item_two_starting_quantity = row[0][m
[32m+[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "Test")[m
[32m+[m[32m    register_instance.process_sale()[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "Test")[m
[32m+[m[32m    register_instance.process_sale()[m
[32m+[m[32m    register_instance.ui.invisible_entry.insert(tk.END, "Test1")[m
[32m+[m[32m    register_instance.process_sale()[m
[32m+[m[32m    register_instance.on_cash()[m
[32m+[m
[32m+[m[32m    c.execute('SELECT Quantity FROM inventory where Barcode = ?', ("Test", ))[m
[32m+[m[32m    results = c.fetchall()[m
[32m+[m[32m    row = results[0][m
[32m+[m
[32m+[m[32m    item_one_final_quantity = row[0][m
[32m+[m
[32m+[m[32m    c.execute('SELECT Quantity FROM inventory where Barcode = ?', ("Test1", ))[m
[32m+[m[32m    results = c.fetchall()[m
[32m+[m[32m    row = results[0][m
[32m+[m
[32m+[m[32m    item_two_final_quantity = row[0][m
[32m+[m
[32m+[m[32m    assert item_one_final_quantity == (item_one_starting_quantity - 2)[m
[32m+[m[32m    assert item_two_final_quantity == (item_two_starting_quantity - 1)[m
[1mdiff --git a/widget_functions.py b/src/widget_functions.py[m
[1mold mode 100644[m
[1mnew mode 100755[m
[1msimilarity index 100%[m
[1mrename from widget_functions.py[m
[1mrename to src/widget_functions.py[m
[1mdiff --git a/src/widget_manager.py b/src/widget_manager.py[m
[1mnew file mode 100755[m
[1mindex 0000000..c010a60[m
[1m--- /dev/null[m
[1m+++ b/src/widget_manager.py[m
[36m@@ -0,0 +1,458 @@[m
[32m+[m[32mimport tkinter as tk[m
[32m+[m[32mimport widget_functions as wf[m
[32m+[m
[32m+[m[32mclass WidgetManager:[m
[32m+[m
[32m+[m[32m    def __init__(self, root, controller):[m
[32m+[m[32m        self.root = root[m
[32m+[m[32m        self.controller = controller[m
[32m+[m
[32m+[m[32m        """Initialize all frames necessary for the program"""[m
[32m+[m
[32m+[m[32m        self.admin_frame = tk.Frame(self.root)[m
[32m+[m[32m        self.add_item_listbox_frame = tk.Frame(self.root)[m
[32m+[m[32m        self.add_item_frame = tk.Frame(self.root)[m
[32m+[m[32m        self.update_inventory_frame = tk.Frame(self.root)[m
[32m+[m[32m        self.register_frame = tk.Frame(self.root, bg='black')[m
[32m+[m[32m        self.additional_register_functions_frame = tk.Frame(self.root)[m
[32m+[m[32m        self.update_buttons_frame = tk.Frame(self.update_inventory_frame)[m
[32m+[m[32m        self.reenter_frame = tk.Frame(self.add_item_frame)[m
[32m+[m[32m        self.add_item_yes_no = tk.Frame(self.add_item_frame)[m
[32m+[m[32m        self.additional_register_functions_yes_no = tk.Frame(self.additional_register_functions_frame)[m
[32m+[m[32m        self.update_inventory_yes_no = tk.Frame(self.update_inventory_frame)[m
[32m+[m[32m        self.register_widgets_frame = tk.Frame(self.register_frame)[m
[32m+[m[32m        self.register_add_item_prompt_frame = tk.Frame(self.root)[m
[32m+[m[32m        self.mode_select_frame = tk.Frame(self.root)[m
[32m+[m
[32m+[m[32m        # Loop through frames, fit them to screen, and configure them so that widgets in column 1 are centered[m
[32m+[m[32m        # Widgets in column 1 will determine the width of the rest of the widgets[m
[32m+[m[32m        for frame in (self.mode_select_frame, self.register_frame, self.admin_frame,[m[41m [m
[32m+[m			[32m        self.add_item_frame, self.update_inventory_frame,[m[41m [m
[32m+[m			[32m        self.additional_register_functions_frame,[m[41m [m
[32m+[m			[32m        self.add_item_listbox_frame, self.register_add_item_prompt_frame):[m
[32m+[m[32m            frame.grid(row=0, column=0, sticky='nsew')[m
[32m+[m[32m            frame.grid_columnconfigure(0, weight=1)[m
[32m+[m[32m            frame.grid_columnconfigure(1, weight=0)[m
[32m+[m[32m            frame.grid_columnconfigure(2, weight=1)[m[41m   [m
[32m+[m
[32m+[m[32m        """These frames only need 2 columns of widgets, so[m
[32m+[m[32m        configure them as such."""[m
[32m+[m[32m        for frame in ([m
[32m+[m[32m            self.update_buttons_frame, self.reenter_frame,[m
[32m+[m[32m            self.add_item_yes_no, self.additional_register_functions_yes_no,[m
[32m+[m[32m            self.register_widgets_frame):[m
[32m+[m[32m            frame.grid_columnconfigure(1, weight=1)[m
[32m+[m[32m            frame.grid_columnconfigure(0, weight=1)[m
[32m+[m
[32m+[m[32m        # =============================[m
[32m+[m[32m        # Widgets for Mode select frame[m
[32m+[m[32m        # =============================[m
[32m+[m
[32m+[m[32m        self.mode_select_label = tk.Label([m
[32m+[m[32m            self.mode_select_frame, text="Please select a mode: ", font=("Arial", 50))[m
[32m+[m[32m        self.mode_select_label.grid(column=1, row=0, sticky='ew', pady=10)[m
[32m+[m[32m        self.register_mode_button = tk.Button([m
[32m+[m[32m            self.mode_select_frame, text="Enter Register Mode",[m
[32m+[m[32m            font=("Arial", 50), command=lambda: controller.enter_register_frame()).grid([m
[32m+[m[32m            column=1, row=1, sticky='ew', pady=10)[m
[32m+[m[32m        self.admin_mode_button = tk.Button([m
[32m+[m[32m            self.mode_select_frame, text="Enter Admin Mode",[m
[32m+[m[32m            font=("Arial", 50), command=lambda: self.admin_frame.tkraise()).grid([m
[32m+[m[32m            column=1, row=2, sticky='ew', pady=10)[m
[32m+[m
[32m+[m[32m        # ===============================[m
[32m+[m[32m        # Widgets for Register Mode frame[m
[32m+[m[32m        # ===============================[m
[32m+[m
[32m+[m
[32m+[m[32m        #Entry box where numbers user is typing are being displayed[m[41m [m
[32m+[m[32m        self.usr_entry = tk.Entry([m
[32m+[m[32m            self.register_frame, font=("Arial", 95),[m
[32m+[m[32m            bg="black", fg="#68FF00", justify="right", width=15)[m
[32m+[m[32m        self.usr_entry.insert(tk.END, "$0.00")[m
[32m+[m[32m        self.usr_entry.grid(column=1, row=0, sticky='ew', padx=2)[m
[32m+[m[32m        self.usr_entry.bind("<FocusIn>", controller.return_invisible_entry_focus)[m
[32m+[m
[32m+[m[32m        # Invisible entry where user input actually occurs. Allows user entry to be untampered so[m[41m [m
[32m+[m[32m        # same entry box can be used for barcodes and numberic values alike[m
[32m+[m[32m        self.invisible_entry = tk.Entry(self.register_frame)[m
[32m+[m[32m        self.invisible_entry.place(x=-10, y=0)[m
[32m+[m[32m        self.invisible_entry.bind("<Return>", controller.process_sale)[m
[32m+[m[32m        for key in ("Home", "Up", "Prior", "Left","Begin", "Right", "End", "Down", "Next", "Insert"):[m
[32m+[m[32m            self.invisible_entry.bind(f"<KeyRelease-KP_{key}>", controller.number_pressed)[m
[32m+[m[32m        self.invisible_entry.bind("<KeyRelease-BackSpace>", controller.clear)[m
[32m+[m[32m        self.invisible_entry.bind("<KeyRelease-KP_Enter>", lambda event: controller.on_cash())[m
[32m+[m[32m        self.invisible_entry.bind("<KeyRelease-KP_Add>", lambda event: controller.on_cc())[m
[32m+[m[32m        self.invisible_entry.bind("<KeyRelease-KP_Multiply>", controller.enter_void_frame)[m
[32m+[m[32m        self.invisible_entry.bind("<KeyRelease-KP_Divide>", lambda event: controller.enter_register_frame())[m
[32m+[m[32m        self.invisible_entry.bind("<KeyRelease-KP_Subtract>", controller.no_sale)[m
[32m+[m
[32m+[m[32m        self.register_widgets_frame.grid(column=1, row=1, sticky='nsew')[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m        self.new_frame = tk.Frame(self.register_widgets_frame)[m
[32m+[m[32m        self.new_frame.grid_columnconfigure(0, weight=1)[m
[32m+[m[32m        self.new_frame.grid(column=0, row=0, sticky='nsew')[m
[32m+[m[32m        # Box where program outputs current running total[m
[32m+[m[32m        self.total_entry = tk.Entry(self.new_frame, font=("Arial", 35), width=9)[m
[32m+[m[32m        self.total_entry.insert(tk.END, "$0.00")[m
[32m+[m[32m        self.total_entry.grid(column = 0, row = 0, sticky='nw')[m
[32m+[m[32m        self.total_entry.bind("<FocusIn>", controller.return_invisible_entry_focus)[m
[32m+[m
[32m+[m[32m        self.register_back_button = tk.Button([m
[32m+[m[32m            self.new_frame, text="Back", font=("Arial", 35),[m
[32m+[m[32m            height=5, command = lambda: self.mode_select_frame.tkraise())[m
[32m+[m[32m        self.register_back_button.grid(column = 0, row = 1, sticky='nw')[m
[32m+[m
[32m+[m[32m        #Log of what is being sold[m[41m [m
[32m+[m[32m        #self.sale_items = tk.Text(self.register_widgets_frame, width=29, font=("Arial", 35), padx=10)[m
[32m+[m[32m        #self.sale_items.grid(column = 1, row = 0, sticky='e')[m
[32m+[m[32m        #self.sale_items.bind("<FocusIn>", controller.return_invisible_entry_focus)[m
[32m+[m
[32m+[m[32m        self.sale_items_listbox = tk.Listbox([m
[32m+[m[32m            self.register_widgets_frame, width=29,[m
[32m+[m[32m            height=8, font=("Arial", 46)[m
[32m+[m[32m        )[m
[32m+[m[32m        self.sale_items_listbox.grid(column = 1, row = 0, sticky='nse')[m
[32m+[m
[32m+[m[32m        self.sale_items_scrollbar = tk.Scrollbar([m
[32m+[m[32m            self.register_widgets_frame,[m
[32m+[m[32m            orient=tk.VERTICAL, width=40[m
[32m+[m[32m        )[m
[32m+[m[32m        self.sale_items_scrollbar.grid(column = 1, row = 0, sticky='nse')[m
[32m+[m[32m        self.sale_items_listbox.config(yscrollcommand= self.sale_items_scrollbar.set)[m
[32m+[m[32m        self.sale_items_scrollbar.config(command = self.sale_items_listbox.yview)[m
[32m+[m
[32m+[m[32m        self.register_add_item_prompt_label=tk.Label([m
[32m+[m[32m            self.register_add_item_prompt_frame, text="Item not found\nAdd it?", font=("Arial", 50))[m
[32m+[m[32m        self.register_add_item_prompt_label.grid(row=0, column=1, sticky='ew')[m
[32m+[m
[32m+[m[32m        self.register_add_item_yes_no_frame=tk.Frame(self.register_add_item_prompt_frame)[m
[32m+[m[32m        self.register_add_item_yes_no_frame.grid_columnconfigure(0, weight=1)[m
[32m+[m[32m        self.register_add_item_yes_no_frame.grid_columnconfigure(1, weight=1)[m
[32m+[m[32m        self.register_add_item_yes_no_frame.grid(row=1, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.register_add_item_yes_button=tk.Button([m
[32m+[m[32m            self.register_add_item_yes_no_frame, text="Yes", font=("Arial", 90),[m
[32m+[m[32m            command = lambda: controller.state_manager.yes_no_var.set("yes"))[m
[32m+[m[32m        self.register_add_item_yes_button.grid(row=0, column=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.register_add_item_no_button=tk.Button([m
[32m+[m[32m            self.register_add_item_yes_no_frame, text="No",[m
[32m+[m[32m            font=("Arial", 90), command = lambda: controller.state_manager.yes_no_var.set("no"))[m
[32m+[m[32m        self.register_add_item_no_button.grid(row=0, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        # ============================[m
[32m+[m[32m        # Widgets for Admin Mode frame[m[41m [m
[32m+[m[32m        # ============================[m
[32m+[m[32m        self.new_item_button = tk.Button([m
[32m+[m[32m            self.admin_frame, text = "Add New Item", font=("Arial", 50),[m
[32m+[m[32m            height = 5, command = lambda: controller.enter_add_item_frame())[m[41m [m
[32m+[m[32m        self.new_item_button.grid([m
[32m+[m[32m            column = 0, row = 1, sticky='s',[m
[32m+[m[32m            padx = 5, pady = 5, ipadx=10, ipady=10)[m
[32m+[m
[32m+[m[32m        self.run_x_button = tk.Button([m
[32m+[m[32m            self.admin_frame, text = "Run\nX", font=("Arial", 50),[m
[32m+[m[32m              height = 5, command = lambda: controller.run_x())[m
[32m+[m[32m        self.run_x_button.grid([m
[32m+[m[32m            column=1, row=1, sticky='e', padx=5,[m
[32m+[m[32m            pady=5, ipadx=10, ipady=10)[m
[32m+[m
[32m+[m
[32m+[m[32m        self.admin_back_button = tk.Button([m
[32m+[m[32m            self.admin_frame, text="Go Back", font=("Arial", 50),[m
[32m+[m[32m            command=lambda: self.mode_select_frame.tkraise()).grid(column = 0, row = 0, sticky='nw')[m
[32m+[m
[32m+[m[32m        # ==========================[m
[32m+[m[32m        # Widgets for Add Item frame[m
[32m+[m[32m        # ==========================[m
[32m+[m
[32m+[m[32m        self.add_item_label = tk.Label([m
[32m+[m[32m            self.add_item_frame, text="Please enter the item's barcode:",[m
[32m+[m[32m              font=("Arial", 50), width=27)[m
[32m+[m
[32m+[m[32m        self.add_item_button = tk.Button([m
[32m+[m[32m            self.add_item_frame, text="Next", font=("Arial", 50),[m
[32m+[m[32m              command=lambda: controller.on_add_item_enter())[m
[32m+[m
[32m+[m[32m        self.back_button = tk.Button([m
[32m+[m[32m            self.add_item_frame, text="Back", font=("Arial", 50),[m
[32m+[m[32m              command=lambda: controller.go_back())[m
[32m+[m
[32m+[m[32m        self.quit_button = tk.Button([m
[32m+[m[32m            self.add_item_frame, text="Quit", font=("Arial", 50),[m
[32m+[m[32m              command = lambda: controller.quit_button_handler())[m
[32m+[m
[32m+[m[32m        self.add_item_entry = tk.Entry([m
[32m+[m[32m            self.add_item_frame, font=("Arial", 50),[m
[32m+[m[32m            width=15, justify="right")[m
[32m+[m[32m        self.add_item_entry.bind("<Return>", controller.on_add_item_enter)[m
[32m+[m
[32m+[m[32m        self.add_item_invisible_entry = tk.Entry([m
[32m+[m[32m            self.add_item_frame, font=("Arial", 50), width=15, justify="right")[m
[32m+[m[32m        self.add_item_invisible_entry.place(x=-10, y=-10)[m
[32m+[m[32m        self.add_item_invisible_entry.bind("<Return>", controller.on_add_item_enter)[m
[32m+[m[32m        self.add_item_invisible_entry.bind("<KeyRelease-KP_Enter>", controller.on_add_item_enter)[m
[32m+[m[32m        for key in ("Left", "Right", "Up", "Down"):[m
[32m+[m[32m            self.add_item_invisible_entry.bind(f"<{key}>", wf.disable_arrow_keys)[m
[32m+[m
[32m+[m
[32m+[m[32m        self.item_info_confirmation = tk.Text([m
[32m+[m[32m            self.add_item_frame, font=("Arial", 40),[m
[32m+[m[32m            width=6, height=3)[m
[32m+[m[32m        self.item_info_confirmation.tag_configure("justify_right", justify = "right")[m
[32m+[m[32m        self.yes_button = tk.Button([m
[32m+[m[32m            self.add_item_yes_no, text="Yes", font=("Arial", 150),[m
[32m+[m[32m            command= lambda: controller.on_yes_no("yes"))[m
[32m+[m
[32m+[m[32m        self.no_button = tk.Button([m
[32m+[m[32m            self.add_item_yes_no, text="No", font=("Arial", 150),[m
[32m+[m[32m            command=lambda: controller.on_yes_no("no"))[m
[32m+[m
[32m+[m[32m        self.yes_button.grid(column=0, row=0, sticky='nsew', padx=10)[m
[32m+[m[32m        self.no_button.grid(column=1, row=0, sticky='nsew', padx=10)[m
[32m+[m
[32m+[m[32m        # =========================[m
[32m+[m[32m        # Widgets for Listbox Frame[m
[32m+[m[32m        # =========================[m
[32m+[m
[32m+[m[32m        self.add_item_listbox = tk.Listbox([m
[32m+[m[32m            self.add_item_listbox_frame, width=20,[m
[32m+[m[32m            height=5, font=("Arial", 50))[m
[32m+[m[32m        self.add_item_scrollbar = tk.Scrollbar([m
[32m+[m[32m            self.add_item_listbox_frame,[m
[32m+[m[32m            orient=tk.VERTICAL, width=40)[m
[32m+[m
[32m+[m[32m        self.add_item_listbox.grid(row=1, column=1, sticky='nw')[m
[32m+[m[32m        self.add_item_scrollbar.grid(row=1, column=1, sticky='nse')[m
[32m+[m
[32m+[m[32m        self.add_item_scrollbar_label = tk.Label([m
[32m+[m[32m            self.add_item_listbox_frame,[m
[32m+[m[32m            text="Please select category:", font=("Arial", 50))[m
[32m+[m[32m        self.add_item_scrollbar_label.grid(column=1, row=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.add_item_scrollbar_next = tk.Button([m
[32m+[m[32m            self.add_item_listbox_frame, text="Next", font=("Arial", 50),[m
[32m+[m[32m              command=lambda: controller.on_add_item_scrollbar_next())[m
[32m+[m[32m        self.add_item_scrollbar_next.grid(row=2, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.add_item_scrollbar_back = tk.Button([m
[32m+[m[32m            self.add_item_listbox_frame, text="Back",[m
[32m+[m[32m            font=("Arial", 50), command=lambda: controller.go_back())[m
[32m+[m[32m        self.add_item_scrollbar_back.grid(column=1, row=3, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.add_item_scrollbar_quit = tk.Button([m
[32m+[m[32m            self.add_item_listbox_frame, text="Quit", font=("Arial", 50),[m
[32m+[m[32m            command=lambda: self.admin_frame.tkraise())[m
[32m+[m[32m        self.add_item_scrollbar_quit.grid(column=1, row=4, sticky='nsew')[m
[32m+[m
[32m+[m[32m        for values in ([m
[32m+[m[32m            "Camping", "Candy", "Cleaning", "Clothes",[m
[32m+[m[32m            "Cookies/Chips", "Drinks", "Dry Goods", "Fishing",[m
[32m+[m[32m            "Gifts", "Ice Cream", "Kitchenware", "Medicinal",[m
[32m+[m[32m            "Paper Products", "Pool", "Propane", "Refrigerated",[m
[32m+[m[32m            "RV", "Toiletries", "Toys"):[m
[32m+[m[32m            self.add_item_listbox.insert(tk.END, values)[m
[32m+[m
[32m+[m[32m        self.add_item_listbox.config(yscrollcommand= self.add_item_scrollbar.set)[m
[32m+[m[32m        self.add_item_scrollbar.config(command = self.add_item_listbox.yview)[m
[32m+[m
[32m+[m[32m        # Buttons for options when user wants to correct one of their inputs[m
[32m+[m
[32m+[m[32m        self.add_name_button = tk.Button([m
[32m+[m[32m            self.reenter_frame, text="Name", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.reenter_button_pressed("name"))[m
[32m+[m[32m        self.add_name_button.grid(row=0, column=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.add_price_button = tk.Button([m
[32m+[m[32m            self.reenter_frame, text="Price", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.reenter_button_pressed("price"))[m
[32m+[m[32m        self.add_price_button.grid(row=0, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.add_barcode_button = tk.Button([m
[32m+[m[32m            self.reenter_frame, text="Barcode", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.reenter_button_pressed("barcode"))[m
[32m+[m[32m        self.add_barcode_button.grid(row=1, column=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.add_taxable_button = tk.Button([m
[32m+[m[32m            self.reenter_frame, text="Taxable", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.reenter_button_pressed("taxable"))[m
[32m+[m[32m        self.add_taxable_button.grid(row=1, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.add_quantity_button = tk.Button([m
[32m+[m[32m            self.reenter_frame, text="Quantity", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.reenter_button_pressed("quantity"))[m
[32m+[m[32m        self.add_quantity_button.grid(row=2, column=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.add_category_button = tk.Button([m
[32m+[m[32m            self.reenter_frame, text="Category", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: self.reenter_button_pressed("category"))[m
[32m+[m[32m        self.add_category_button.grid(row=2, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        # ==================================[m
[32m+[m[32m        # Widgets for Update Inventory Frame[m
[32m+[m[32m        # ==================================[m
[32m+[m
[32m+[m[32m        self.update_inventory_label=tk.Label([m
[32m+[m[32m            self.update_inventory_frame, text="What would you\nlike to update?",[m
[32m+[m[32m            font=("Arial", 50))[m
[32m+[m[32m        self.update_inventory_label.grid(column=1, row=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.update_inventory_entry=tk.Entry([m
[32m+[m[32m            self.update_inventory_frame,[m
[32m+[m[32m            font=("Arial", 75), width=18)[m
[32m+[m[32m        self.update_inventory_entry.bind("<Return>", controller.get_update_barcode)[m
[32m+[m
[32m+[m[32m        self.update_buttons_frame.grid(column = 1, row=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.update_yes_button = tk.Button([m
[32m+[m[32m            self.update_inventory_yes_no, text="Yes", font=("Arial", 150),[m
[32m+[m[32m            command= lambda: controller.state_manager.yes_no_var.set("yes"))[m
[32m+[m
[32m+[m[32m        self.update_no_button = tk.Button([m
[32m+[m[32m            self.update_inventory_yes_no, text="No", font=("Arial", 150),[m
[32m+[m[32m            command=lambda: controller.state_manager.yes_no_var.set("no"))[m
[32m+[m
[32m+[m
[32m+[m[32m        self.update_yes_button.grid(column=0, row=0, sticky='nsew', padx=10)[m
[32m+[m[32m        self.update_no_button.grid(column=1, row=0, sticky='nsew', padx=10)[m
[32m+[m
[32m+[m[32m        self.update_name_button = tk.Button([m
[32m+[m[32m            self.update_buttons_frame, text="Name", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.update_inventory("Name", None))[m
[32m+[m[32m        self.update_name_button.grid(row=0, column=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.update_price_button = tk.Button([m
[32m+[m[32m            self.update_buttons_frame, text="Price", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.update_inventory("Price", None))[m
[32m+[m[32m        self.update_price_button.grid(row=0, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.update_barcode_button = tk.Button([m
[32m+[m[32m            self.update_buttons_frame, text="Barcode", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.update_inventory("Barcode", None))[m
[32m+[m[32m        self.update_barcode_button.grid(row=1, column=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.update_taxable_button = tk.Button([m
[32m+[m[32m            self.update_buttons_frame, text="Taxable", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.update_inventory("Taxable", None))[m
[32m+[m[32m        self.update_taxable_button.grid(row=1, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.update_quantity_button = tk.Button([m
[32m+[m[32m            self.update_buttons_frame, text="Quantity", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.update_inventory("Quantity", None))[m
[32m+[m[32m        self.update_quantity_button.grid(row=2, column=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.update_category_button = tk.Button([m
[32m+[m[32m            self.update_buttons_frame, text="Category", font=("Arial", 75),[m
[32m+[m[32m            command = lambda: controller.update_inventory("Category", None))[m
[32m+[m[32m        self.update_category_button.grid(row=2, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        # ==========================================[m
[32m+[m[32m        # Widgets for Additional Register Functions[m[41m [m
[32m+[m[32m        # ==========================================[m
[32m+[m
[32m+[m[32m        self.additional_register_functions_label = tk.Label([m
[32m+[m[32m            self.additional_register_functions_frame, text="Select an Option", font=("Arial", 50))[m
[32m+[m[32m        self.additional_register_functions_label.grid(column = 1, row = 0, sticky='ew')[m
[32m+[m
[32m+[m[32m        self.register_functions_buttons_frame=tk.Frame(self.additional_register_functions_frame)[m
[32m+[m[32m        self.register_functions_buttons_frame.grid_columnconfigure(0, weight=1)[m
[32m+[m[32m        self.register_functions_buttons_frame.grid_columnconfigure(1, weight=1)[m
[32m+[m[32m        self.register_functions_buttons_frame.grid(row=1, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.last_button = tk.Button([m
[32m+[m[32m            self.register_functions_buttons_frame, text="Void Last\nTransaction",[m
[32m+[m[32m            font=("Arial", 70), command = lambda: controller.void_transaction("last"))[m
[32m+[m[32m        self.last_button.grid(row=0, column=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.number_button = tk.Button([m
[32m+[m[32m            self.register_functions_buttons_frame, text="Void by\nReference #",[m[41m [m
[32m+[m[32m            font=("Arial", 70), command = lambda: controller.void_transaction("ref"))[m
[32m+[m[32m        self.number_button.grid(row=0, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.print_receipt_button = tk.Button([m
[32m+[m[32m            self.register_functions_buttons_frame, text="Print a Receipt", font=("Arial", 70))[m
[32m+[m[32m        self.print_receipt_button.grid(row=1, column=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.make_return_button = tk.Button([m
[32m+[m[32m            self.register_functions_buttons_frame, text="Process Return",[m
[32m+[m[32m            font=("Arial", 70), command = lambda: controller.process_return())[m
[32m+[m[32m        self.make_return_button.grid(row=1, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.run_x_button = tk.Button([m
[32m+[m[32m            self.register_functions_buttons_frame, text="Run X",[m
[32m+[m[32m            font=("Arial", 50), command = lambda: controller.run_x())[m
[32m+[m[32m        self.run_x_button.grid(row=2, column=0, sticky='nsew')[m
[32m+[m
[32m+[m[32m        self.continue_button = tk.Button([m
[32m+[m[32m            self.additional_register_functions_frame, text="Continue", font=("Arial", 50),[m
[32m+[m[32m            command= lambda: controller.state_manager.reference_number_var.set("continue"))[m
[32m+[m
[32m+[m[32m        self.additional_register_functions_entry = tk.Entry([m
[32m+[m[32m            self.additional_register_functions_frame,[m
[32m+[m[32m            font=("Arial", 50), justify="right")[m
[32m+[m[32m        self.additional_register_functions_entry.bind([m
[32m+[m[32m            "<Return>", controller.on_additional_register_functions_entry)[m
[32m+[m
[32m+[m[32m        self.additional_register_functions_text = tk.Text([m
[32m+[m[32m            self.additional_register_functions_frame, width=30, height=3, font=("Arial", 40))[m
[32m+[m
[32m+[m
[32m+[m[32m        self.additional_register_functions_yes_button = tk.Button([m
[32m+[m[32m            self.additional_register_functions_yes_no, text="Yes", font=("Arial", 150),[m
[32m+[m[32m            command= lambda: controller.state_manager.yes_no_var.set("yes"))[m
[32m+[m[32m        self.additional_register_functions_no_button = tk.Button([m
[32m+[m[32m            self.additional_register_functions_yes_no, text="No", font=("Arial", 150),[m
[32m+[m[32m            command=lambda: controller.state_manager.yes_no_var.set("no"))[m
[32m+[m
[32m+[m
[32m+[m[32m        self.additional_register_functions_yes_button.grid(column=0, row=0, sticky='nsew', padx=10)[m
[32m+[m[32m        self.additional_register_functions_yes_button.grid(column=1, row=0, sticky='nsew', padx=10)[m
[32m+[m
[32m+[m
[32m+[m[32m    def enter_add_item_frame(self):[m
[32m+[m[32m        self.add_item_label.grid(column=1, row=0, sticky='ew')[m
[32m+[m[32m        self.add_item_entry.grid(column=1, row=1, sticky='ew', pady=15)[m
[32m+[m[32m        self.add_item_button.grid(column=1, row=2, sticky='ew')[m
[32m+[m[32m        self.back_button.grid(column=1, row=4, sticky='ew')[m
[32m+[m[32m        self.quit_button.grid(column=1, row=5, sticky='ew')[m
[32m+[m[32m        self.add_item_yes_no.grid_forget()[m
[32m+[m[32m        self.item_info_confirmation.grid_forget()[m
[32m+[m[32m        self.reenter_frame.grid_forget()[m
[32m+[m[32m        self.add_item_frame.tkraise()[m
[32m+[m[32m        self.add_item_entry.focus_set()[m
[32m+[m
[32m+[m[32m    def set_return_start(self):[m
[32m+[m[32m        self.register_functions_buttons_frame.grid_forget()[m
[32m+[m[32m        self.additional_register_functions_label.config(text="Please scan the item(s) to return\nWhen done, press continue")[m
[32m+[m[32m        self.additional_register_functions_entry.grid(row=1, column=1, sticky='nsew')[m
[32m+[m[32m        self.additional_register_functions_entry.focus_force()[m
[32m+[m[32m        self.continue_button.grid(row=2, column=1, sticky='nsew')[m
[32m+[m
[32m+[m[32m    def set_return_confirmation(self):[m
[32m+[m[32m        self.additional_register_functions_label.config(text="Return the following item(s)?")[m
[32m+[m[32m        self.additional_register_functions_text.grid(row=1, column=1, sticky='nsew')[m
[32m+[m[32m        self.additional_register_functions_yes_no.grid(row=2, column=1, sticky='nsew')[m
[32m+[m[32m        self.additional_register_functions_text.delete("1.0", "end")[m
[32m+[m
[32m+[m[32m    def set_return_restart(self):[m
[32m+[m[32m        self.additional_register_functions_label.config(text="Please scan the item(s) to return\nWhen done, press continue")[m
[32m+[m[32m        self.additional_register_functions_yes_no.grid_forget()[m
[32m+[m[32m        self.continue_button.grid(row=2, column=1, sticky='nsew')[m
[32m+[m[32m        self.additional_register_functions_text.grid_forget()[m
[32m+[m[32m        self.additional_register_functions_text.delete("1.0", "end")[m
[32m+[m[32m        self.additional_register_functions_entry.grid(row=1, column=1, sticky='nsew')[m
[32m+[m
[32m+[m
[32m+[m[32m    def set_return_options(self):[m
[32m+[m[32m        self.additional_register_functions_yes_no.grid_forget()[m
[32m+[m[32m        self.register_functions_buttons_frame.grid(row=1, column=1, sticky='nsew')[m
[32m+[m[32m        self.additional_register_functions_label.config(text="Select an Option")[m
[32m+[m[32m        self.additional_register_functions_text.grid_forget()[m
[32m+[m[32m        self.additional_register_functions_entry.grid_forget()[m
[32m+[m
[32m+[m
[32m+[m[41m    [m
[32m+[m
